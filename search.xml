<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>前端面试常用题</title>
    <url>/2024/03/11/fileName/</url>
    <content><![CDATA[<h1 id="html"><a href="#html" class="headerlink" title="html"></a>html</h1><p>HTML的全称为超文本标记语言，是一种<a href="https://baike.baidu.com/item/%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80/5964436">标记语言</a>。它包括一系列标签，通过这些标签可以将网络上的文档格式统一，使分散的Internet资源连接为一个逻辑整体。HTML文本是由HTML命令组成的描述性文本，HTML命令可以说明文字，图形、<a href="https://baike.baidu.com/item/%E5%8A%A8%E7%94%BB/206564">动画</a>、声音、表格、链接等。 </p>
<h1 id="css"><a href="#css" class="headerlink" title="css"></a>css</h1><h2 id="选择器的优先级"><a href="#选择器的优先级" class="headerlink" title="选择器的优先级"></a>选择器的优先级</h2><p>通配符选择器* &lt; 标签选择器 &lt; 类 &lt; id &lt; 内联样式 &lt; !important</p>
<span id="more"></span>。

<p> 当涉及到后代选择器，有多个css选择同一个类标签时，优先级的考虑复杂了些许，标签使用哪个css可以通过计算权值来决定优先</p>
<p>  在同一个样式表中（同一个style或css文件）：</p>
<p>​     1.权值相同：就近原则</p>
<p>​     2.权值不同：选取权值最高的使用</p>
<p>  选择器的权值：</p>
<p>·    标签选择器：1</p>
<p>·    类选择器和伪类：10</p>
<p>·    ID选择器：100</p>
<p>·    通配符选择器：0</p>
<p>·    行内样式：1000</p>
<p>  权值计算的规则：不同种选择器数量x权值之和</p>
<p>  例如：</p>
<p>#one div.color h2{…}</p>
<p>​     ID：1x100</p>
<p>​     标签：2 x1</p>
<p>​     类：10</p>
<p>总权值：100 2 10&#x3D;112</p>
<h2 id="语义化标签"><a href="#语义化标签" class="headerlink" title="语义化标签"></a>语义化标签</h2><p>h1,h2,,,p,a,span,strong,div,iiii,main,header,footer,nav,aside,video,audio.</p>
<h2 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h2><p>盒模型：每一个标签可以看做包含了几层结构的一个盒子，该盒子由内而外分别有几层结构：content、padding(内边距)、border(边框)、margin(外边距)。</p>
<p>宽高就是盒模型中content的那部分大小 </p>
<p>默认的盒模型设置了padding、border之后会往外扩展，导致标签的实际所占区域变大，如果不想让其变大，则可以修改默认的盒模型 ，使得padding、border往内挤压</p>
<p>&#x2F;* box-sizing用来设置盒模型。content-box就是所有标签默认的盒模型 *&#x2F;</p>
<p>box-sizing: content-box;</p>
<p>&#x2F;* border-box是让padding、border往内挤压的盒模型样式，因此标签的实际所占区域不会变大，但是内容(content)会被挤压 *&#x2F;</p>
<p>box-sizing: border-box;</p>
<h2 id="margin穿透"><a href="#margin穿透" class="headerlink" title="margin穿透"></a>margin穿透</h2><p>margin击穿，主要是因为：父元素的上边界不确定。子元素和父元素同时是块元素，然后子元素的顶端和父元素的顶端是对齐的，此时子元素一旦添加margin-top就会导致该margin击穿父元素，最终导致父元素下沉(感觉是该margin加到父元素身上，其实不是)</p>
<p>解决margin可以通过以下方案：</p>
<p>方案1、overflow: hidden; </p>
<p>方案2、padding-top: 1px; </p>
<p>方案3、 border-top: 1px solid blue; </p>
<p>方案4、不用margin,使用paading-top</p>
<p>&#x2F;* 普通布局时，元素的margin不会叠加，会采用较大的那一个 &#x2F; &#x2F; 浮动元素之间的margin会叠加 *&#x2F;</p>
<h2 id="网格布局"><a href="#网格布局" class="headerlink" title="网格布局"></a>网格布局</h2><p>“行”（row）  “列”（column）</p>
<p>\1. 项目只能是容器的顶层子元素，Grid 布局只对项目生效</p>
<p>\2. Grid 布局的属性分成两类。一类定义在容器上面，称为容器属性；另一类定义在项目上面，称为项目属性。</p>
<p>\3. 容器属性</p>
<p>3.1 display 属性</p>
<p>  display: grid指定一个容器采用网格布局。</p>
<p>  默认情况下，容器元素都是块级元素，但也可以设成行内元素。</p>
<p>  display: inline-grid;</p>
<p>注意：设为网格布局以后，容器子元素（项目）的float、display: inline-block、display: table-cell、vertical-align和column-*等设置都将失效。</p>
<p>3.2 grid-template-columns 属性，grid-template-rows 属性</p>
<p>3.2.1 grid-template-columns属性定义每一列的列宽，grid-template-rows属性定义每一行的行高。</p>
<p>  grid-template-columns: 100px 100px 100px;</p>
<p>  grid-template-rows: 100px 100px 100px;</p>
<p>  上面代码指定了一个三行三列的网格，列宽和行高都是100px。</p>
<p>  也可以使用百分比。</p>
<p>  grid-template-columns: 33.33% 33.33% 33.33%;</p>
<p>3.2.2 repeat()</p>
<p> repeat()函数，设置重复值。</p>
<p> grid-template-columns: repeat(3, 33.33%);</p>
<p> repeat()接受两个参数，第一个参数是重复的次数（上例是3），第二个参数是所要重复的值。</p>
<p> repeat()重复某种模式也是可以的。</p>
<p> grid-template-columns: repeat(2, 100px 20px 80px)</p>
<p> 上面代码定义了6列，第一列和第四列的宽度为100px，第二列和第五列为20px，第三列和第六列为80px</p>
<p>3.2.3 auto-fill 关键字 (填充)</p>
<p> 单元格的大小是固定的，但是容器的大小不确定。如果希望每一行（或每一列）容纳尽可能多的单元格，这时可以使用auto-fill关键字表示自动填充。</p>
<p>  grid-template-columns: repeat(auto-fill, 100px)</p>
<p>3.2.4 fr 关键字 (表示比例关系)</p>
<p> 如果两列的宽度分别为1fr和2fr，就表示后者是前者的两倍。</p>
<p> grid-template-columns: 1fr 1fr</p>
<p> 上面代码表示两个相同宽度的列。</p>
<p> fr可以与绝对长度的单位结合使用</p>
<p> grid-template-columns: 150px 1fr 2fr;</p>
<p> 上面代码表示，第一列的宽度为150像素，第二列的宽度是第三列的一半。</p>
<p>3.2.5 minmax()</p>
<p> minmax()函数产生一个长度范围，表示长度就在这个范围之中。它接受两个参数，分别为最小值和最大值。</p>
<p> grid-template-columns: 1fr 1fr minmax(100px, 1fr);</p>
<p> 上面代码中，minmax(100px, 1fr)表示列宽不小于100px，不大于1fr。</p>
<p>3.2.6  auto 关键字</p>
<p> auto关键字表示由浏览器自己决定长度。</p>
<p> grid-template-columns: 100px auto 100px;</p>
<p> 上面代码中，第二列的宽度，基本上等于该列单元格的最大宽度，除非单元格内容设置了min-width，且这个值大于最大宽度。</p>
<h2 id="元素隐藏的方式"><a href="#元素隐藏的方式" class="headerlink" title="元素隐藏的方式"></a>元素隐藏的方式</h2><p>opacity: 0; 设置透明度为0 占位置 </p>
<p>visibility: hidden; 设置是否可见，hidden隐藏（不可见），但是标签还在页面存在 </p>
<p>display:none后，元素的位置不在了</p>
<h1 id="Js"><a href="#Js" class="headerlink" title="Js"></a>Js</h1><h2 id="cookie的格式-获取和存储-清除"><a href="#cookie的格式-获取和存储-清除" class="headerlink" title="cookie的格式 获取和存储 清除"></a>cookie的格式 获取和存储 清除</h2><p>获取：document.cookie 返回所有的cookie,字符串形式，以分号加空格分割</p>
<p>export function getCookie(key: string) {</p>
<p> const reg &#x3D; new RegExp(“(^| )” + key + “&#x3D;([^;]*)(;|$)”);</p>
<p> const arr &#x3D; document.cookie.match(reg);</p>
<p> if (arr) return unescape(arr[2]);</p>
<p> else return “”;</p>
<p>}</p>
<p>存储：document.cookie &#x3D; key + “&#x3D;” + value</p>
<p>export function setCookie(key: string, value: string) {</p>
<p> document.cookie &#x3D; key + “&#x3D;” + value;</p>
<p>}</p>
<p>清除：（将过期时间设置为当前时间）</p>
<p>export function clearCookie(key:string){</p>
<p> document.cookie &#x3D; key+”&#x3D;0;expires&#x3D;” + new Date().toUTCString(); &#x2F;&#x2F;国际时间</p>
<p>}</p>
<h2 id="防抖和节流"><a href="#防抖和节流" class="headerlink" title="防抖和节流"></a>防抖和节流</h2><p>参考：<a href="https://blog.csdn.net/baidu_39009276/article/details/123798695">https://blog.csdn.net/baidu_39009276/article/details/123798695</a></p>
<p>iiii&#x2F;clip_image008.jpg)</p>
<h2 id="类和类继承"><a href="#类和类继承" class="headerlink" title="类和类继承"></a>类和类继承</h2><p>class 类是一种抽象的体现，用来表示具有相同特性的一类事物，是面向对象编程（oop）不可缺少的工具。</p>
<ol>
<li><p>定义一个类，类名建议首字母大写</p>
</li>
<li><p>class Animal{</p>
</li>
</ol>
<p>​    &#x2F;&#x2F; 类的构造函数，一般在类构造函数中定义类的属性。</p>
<p>​    constructor(name,age){</p>
<p>​      &#x2F;&#x2F; 定义类的属性</p>
<p>​      this.name &#x3D; name;</p>
<p>​      this.age &#x3D; age;</p>
<p>​    }</p>
<p>​    &#x2F;&#x2F; 方法  eat方法名，()形参，{}方法体</p>
<p>​    eat(food){</p>
<p>​      console.log(this.name + “喜欢吃” + food)</p>
<p>​    }</p>
<ol start="3">
<li>类继承 extends继承</li>
</ol>
<p>​    class Person extends Animal{</p>
<p>​     constructor(name, age, sex){</p>
<p>​       &#x2F;&#x2F; 去调用父类的构造函数，让父类帮子类进行初始化。</p>
<p>​       super(name, age);</p>
<p>​       &#x2F;&#x2F; 扩展的属性,</p>
<p>​       this.sex &#x3D; sex;</p>
<p>​     }</p>
<p>​      &#x2F;&#x2F; 扩展方法</p>
<p>​     sleep(){}</p>
<p>​     &#x2F;&#x2F; 扩展的方法如果和继承的方法名称相同时，会优先使用本类中的方法，这种做法叫“重写”，override</p>
<p>​     eat(){}</p>
<p>   }</p>
<h2 id="函数和方法的区别"><a href="#函数和方法的区别" class="headerlink" title="函数和方法的区别"></a>函数和方法的区别</h2><p>函数(function)：独立的function称之为函数</p>
<p>方法(method)：当一个函数属于某一个对象时，称这个函数是这个对象的方法</p>
<p>Var obj&#x3D;{</p>
<p>Foo:function(){}</p>
<p>}</p>
<p>obj.foo()</p>
<h2 id="链式作用域（作用域链）"><a href="#链式作用域（作用域链）" class="headerlink" title="链式作用域（作用域链）"></a>链式作用域（作用域链）</h2><p>在JS中访问一个变量时，会先从当前作用域中查找是否有变量的定义，如果有，直接使用即可。如果没有，会向上层作用域中查找此变量，上层作用域如果有，直接使用。如果没有继续向上层作用域中查找，一直找到全局作用域为止，这样查找变量的过程，就是链式作用域，或者称为作用域链。</p>
<h2 id="Js的内存管理"><a href="#Js的内存管理" class="headerlink" title="Js的内存管理"></a>Js的内存管理</h2><p>Js在定义变量时为我们分配内存</p>
<p>js对基本数据类型内存的分配会在执行时，直接在栈空间进行分配</p>
<p>js对于复杂数据类型内存的分配会在堆内存中开辟一块空间，并且将这块空间的指针返回值变量引用</p>
<h2 id="Js垃圾回收"><a href="#Js垃圾回收" class="headerlink" title="Js垃圾回收"></a>Js垃圾回收</h2><p>GC（垃圾回收）算法：</p>
<p><strong>①</strong>　<strong>引用计数</strong></p>
<p>当一个对象有一个引用指向它时，那么这个对象的引用就+1，当一个对象的引用为0时，这个对象就可以被销毁掉</p>
<p>这个算法有一个很大的弊端就是会产生循环引用</p>
<p><strong>②</strong>　<strong>标记清除（广泛，v8<strong><strong>引擎使用的GC</strong></strong>是在此基础上优化的）</strong></p>
<p>这个算法是设置一个根对象，垃圾回收器会定期从这个根开始，找所有从根开始有引用到的对象，对于那些没有引用到的对象，就认为是不可用的对象</p>
<p>这个算法可以很好的解决循环引用的问题</p>
<h2 id="深拷贝、浅拷贝"><a href="#深拷贝、浅拷贝" class="headerlink" title="深拷贝、浅拷贝"></a>深拷贝、浅拷贝</h2><p><strong>定义：</strong></p>
<p>浅拷贝就是拷贝一层,引用类型的深层次还是共享内存地址，对象的改变会反应到拷贝对象上。</p>
<p>深拷贝开辟一个新的栈，两个对象属性相同，但是对应两个不同的地址，修改一个对象的属性，不会改变另一个对象的属性，简单来说:就是完全独立的双胞胎,彼此之间不会影响</p>
<p><strong>浅拷贝方法：</strong></p>
<p>assign()说明有一个拷贝行为。是一个“浅拷贝”</p>
<p>map,filter,slice,reduce,concat,扩展运算符等数组中产生新数组的API基本上都是“浅拷贝”。只是部分深拷贝，只是对第一层进行了深拷贝，其他都是浅拷贝</p>
<p>Array.from和 Object.create是浅拷贝 </p>
<p><strong>深拷贝方法：</strong></p>
<p>1、_.cloneDeep()</p>
<p>2、JSON.stringify()</p>
<p>2.1、 JSON.stringify() 深拷贝弊端</p>
<p>2.2、JSON.stringify() 深拷贝的原理</p>
<p>2.3、JSON.stringify() 深拷贝产生弊端缘由</p>
<p><strong>3、手写递归方法</strong></p>
<p>3.1、手写递归弊端</p>
<p>​                      </p>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>闭包是两部分组成的：函数+可以访问的自由变量</p>
<p>function foo(){</p>
<p> var n&#x3D;’foo’ &#x2F;&#x2F;自由变量</p>
<p> function bar(){</p>
<p>  console.log(‘bar’,n) &#x2F;&#x2F;闭包</p>
<p>}</p>
<p>return bar</p>
<p>}</p>
<p>var fn&#x3D;foo()  &#x2F;&#x2F;foo()执行完后理应出栈销毁，但bar仍能访问n变量（bar访问上层作用域，根据垃圾回收机制，不会被销毁），该销毁的没有销毁（js</p>
<p>内部实现的）就形成了闭包</p>
<p>fn()</p>
<p>闭包跟函数最大的区别在于当捕捉闭包的时候，它的自由变量会在捕捉时被确定，这样即使脱离了上下文，它也能照常运行</p>
<p><strong>总结：js****闭包的含义</strong></p>
<p>u 一个普通的函数，如果他可以访问外层作用域的自由变量。那么这个函数就是一个闭包</p>
<p>u 从广义的角度来说，js中的函数都是闭包</p>
<p>u 从狭义的角度来说，js中一个函数，如果访问了外层作用域的变量，那么它是一个闭包</p>
<p>闭包只使用一次，或使用后不再使用，闭包该被销毁的没有被销毁，就会造成内存泄漏</p>
<p>如何解决内存泄漏：foo&#x3D;null; &#x2F;&#x2F;使函数指向空地址，GC垃圾就会回收</p>
<h2 id="let-const区别"><a href="#let-const区别" class="headerlink" title="let const区别"></a>let const区别</h2><p><strong>1、相同点：</strong></p>
<p>①　只在声明所在的块级<a href="https://so.csdn.net/so/search?q=%E4%BD%9C%E7%94%A8%E5%9F%9F&spm=1001.2101.3001.7020">作用域</a>内有效。</p>
<p>②　不提升，同时存在暂时性死区，只能在声明的位置后面使用。</p>
<p>③　不可重复声明。</p>
<p><strong>2、不同点：</strong></p>
<p>①　let声明的变量可以改变，值和类型都可以改变；const声明的常量不可以改变。</p>
<p>②　const一旦声明，就必须立即初始化，不能以后再赋值。</p>
<h2 id="js中关于const在for-in或者for-of中的使用"><a href="#js中关于const在for-in或者for-of中的使用" class="headerlink" title="js中关于const在for in或者for of中的使用"></a>js中关于const在for in或者for of中的使用</h2><h2 id="foreach和map的区别"><a href="#foreach和map的区别" class="headerlink" title="foreach和map的区别"></a>foreach和map的区别</h2><p><strong>1相同点</strong></p>
<p>(1)都是循环遍历数组中的每一项。</p>
<p>(2)每次执行匿名函数都支持三个参数，参数分别为item(当前每一项)，index(索引值)，arr(原数组)。</p>
<p>(3)匿名函数中的this都是指向window。</p>
<p>(4)只能遍历数组。</p>
<p><strong>2不同点：</strong></p>
<p>(1)map()会分配内存空间存储新数组并返回，forEach()不会返回数据。</p>
<p>(2)forEach()允许callback更改原始数组的元素，注意内部不能使用break和continue。map()返回新的数组。</p>
<p>正常终止for循环我们可以使用break关键字来实现，而在forEach循环中是不能使用break和continue这两个关键字的，为什么呢？</p>
<p>因为这两个关键字要在循环中使用，而forEach中所执行的是callback，callback是个函数所以不能使用。</p>
<p>那在forEach中应该怎么样终止循环呢？使用return？</p>
<p>使用 return 的话，只能跳出本次循环执行下一次循环，并不会终止forEach循环。</p>
<p>可以使用 抛出错误 的方式来真正的终止forEach循环</p>
<h2 id="break-continue-return的区别"><a href="#break-continue-return的区别" class="headerlink" title="break continue return的区别"></a>break continue return的区别</h2><p><strong>1break</strong>：执行break操作，跳出所在的当前整个循环，到外层代码继续执行。（需要在break后紧跟一个标签，这个标签用于标识哪个外层循环。switch case 语句，break不仅可以结束其所在的循环，还可结束其外层循环，但一次只能结束一种循环。）</p>
<p><strong>2continue</strong>：执行continue操作，跳出本次循环，从下一个迭代继续运行循环，内层循环执行完毕，外层代码继续运行。（if判断不满足当前条件，则continue，continue结束的是本次循环，将接着开始下一次循环。在continue后不需要加参数）</p>
<p><strong>3return</strong>：执行return操作，直接返回函数，所有该函数体内的代码（包括循环体）都不会再执行。（return同时结束其所在的循环和其外层循环。在return后需要紧跟一个返回值）</p>
<h2 id="for…in…和for…of…区别"><a href="#for…in…和for…of…区别" class="headerlink" title="for…in…和for…of…区别"></a>for…in…和for…of…区别</h2><p>1、for…in…一般用来循环对象，但也可以循环数组，字符串。</p>
<p>2、for…of…一般用来循环数组，但也可以循环对象，字符串，注意：需要特殊处理。</p>
<p>3、for…in…是ES5标准，for…of…是ES6标准。</p>
<p>4、for…in…循环数组时key是索引，for…of…循环数组时key是值。</p>
<p>5、for…in…可以循环没有迭代器的对象，for…of…天生可以循环带迭代器的对象。数组天生带迭代器。对象不带迭代器，想获取对象的的迭代器，需要通过entries(),keys(),values()。</p>
<h2 id="js高阶函数"><a href="#js高阶函数" class="headerlink" title="js高阶函数"></a>js高阶函数</h2><p><strong>1、reduce</strong> <strong>累加</strong> <strong>返回新数组</strong> <strong>不会影响原数组</strong></p>
<p>对数组中的每一个元素执行一个由你提供的reducer函数（升序执行），将其结果汇总为单个返回值</p>
<p>arr.reduce(function (accumulator,currentValue,currentIndex,arr),initilavlue)</p>
<p>accumulator：必需，累计器</p>
<p>currentValue：必需，当前元素</p>
<p>currentIndex：可选，当前元素的索引</p>
<p>arr：可选，要处理的数组</p>
<p>initilavlue：可选，传递给函数的初始值，相当于Accumulator的初始值，默认为0</p>
<p>上一次的输出会作为下一次的输入</p>
<p><strong>2、findIndex</strong> <strong>查询</strong></p>
<p>findIndex()方法返回数组中满足提供的测试函数的第一个元素的索引。若没有找到对应元素则返回-1。 var arr5 &#x3D; [2, 4, “11”, 8, 11, 13]; </p>
<p>var index5 &#x3D; arr5.findIndex(function (v, i, arr) { return v &gt; 10; }) </p>
<p>console.log(index5);</p>
<p><strong>3、find</strong> <strong>查询</strong></p>
<p>find方法返回数组中满足提供的测试函数的第一个元素的值。否则返回 undefined。</p>
<p>var arr4 &#x3D; [2001, 2000, 2002, 2003, 2004]; </p>
<p>var result4 &#x3D; arr4.find(function (v, i, arr) { return (v % 4 &#x3D;&#x3D;&#x3D; 0 &amp;&amp; v % 100 !&#x3D;&#x3D; 0) || (v % 400 &#x3D;&#x3D;&#x3D; 0); });</p>
<p>console.log(result4);</p>
<p><strong>4、filter</strong> <strong>查询</strong> <strong>返回新数组，不影响原数组</strong></p>
<p>filter过滤原数组，筛选出来满足某个业务逻辑条件的新数组。</p>
<p>var arr3 &#x3D; [‘a’, ‘hello’, ‘abca’, ‘an’, ‘bca’]; </p>
<p>var newArr3 &#x3D; arr3.filter(function (v, i, arr) { &#x2F;&#x2F; str.indexOf()查找某个字符在字符串索引，找到返回索引，找不到返回-1。 </p>
<p>return v.indexOf(‘a’) !&#x3D;&#x3D; -1; }); </p>
<p>console.log(newArr3);</p>
<p><strong>5、every</strong></p>
<p>every测试一个数组内的所有元素是否都能通过某个指定函数的测试。所有的都通过返回true，否则返回false</p>
<p><strong>6、some</strong></p>
<p>some测试数组中是不是至少有1个元素通过了被提供的函数测试。</p>
<p>var arr1 &#x3D; [1, 2, 4, 6]; </p>
<p>var result1 &#x3D; arr1.some(function (v, i, arr) { return v % 2 &#x3D;&#x3D; 0; });</p>
<p>console.log(result1);</p>
<p><strong>7、forEach</strong></p>
<p>forEach()专门用来循环数组，是数组特有的API。但注意内部不能使用breack和continue。</p>
<p>arr.forEach(function (v, i, arr) {</p>
<p> if (i &#x3D;&#x3D;&#x3D; 2) {}</p>
<p> else {</p>
<p>  console.log(v);</p>
<p>  }</p>
<p> })</p>
<p><strong>8、sort</strong> <strong>改变原数组</strong></p>
<p>js的数组自带一个sort方法，可以对简单数组进行排序</p>
<p>var arr&#x3D;[3,1,6,19,12,7];</p>
<p> var res&#x3D;arr.sort(function(a,b){ </p>
<p>return a-b;&#x2F;&#x2F;升序</p>
<p>return b-a;&#x2F;&#x2F;降序  </p>
<p>})</p>
<p>&#x2F;&#x2F; 从大到小：</p>
<p>arr.reverse(); console.log(arr,res);</p>
<p><strong>9、map</strong> <strong>返回新数组，不会影响原数组</strong></p>
<p>map()映射：把数组中的元素经过一系列业务逻辑处理，最后得到新数组的过程。</p>
<p>var arr1 &#x3D; [‘a’, ‘b’, ‘c’]; </p>
<p>var newArr1 &#x3D; arr1.map(function (v, i, arr) { return v + (i + 1); }); </p>
<p>console.log(newArr1);</p>
]]></content>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/11/23/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<span id="more"></span>。

<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>categories</category>
      </categories>
  </entry>
  <entry>
    <title>关于md代码书写---Typora</title>
    <url>/2024/03/11/postName/</url>
    <content><![CDATA[<h2 id="文字处理"><a href="#文字处理" class="headerlink" title="文字处理"></a>文字处理</h2><h3 id="1-标题"><a href="#1-标题" class="headerlink" title="1.标题"></a>1.标题</h3><p>标题一共有六级,是用“#”实现的，标题前面加一个“#”，代表一级标题；依次类推，标题前面加六个“#”代表六级标题；一共有六级标题，编辑各种文档完全够用,左侧的目录会根据输入的标题自动生成响应的层级。</p>
<span id="more"></span>。

<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150147-82804.gif"></img></p>
<h3 id="2-强调"><a href="#2-强调" class="headerlink" title="2.强调"></a>2.<strong>强调</strong></h3><p>在要<strong>强调</strong>内容前后分别加两个“*”号。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150148-9b57a.gif"></img></p>
<h3 id="3-斜体"><a href="#3-斜体" class="headerlink" title="3.斜体"></a>3.<em>斜体</em></h3><p>前后分别加一个“*”号。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150148-20d37.gif"></img></p>
<h3 id="4-删除线"><a href="#4-删除线" class="headerlink" title="4.删除线"></a>4.<del>删除线</del></h3><p>内容前后分别加上<strong>两个</strong>“~”号。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150149-3aed3.gif"></img></p>
<hr>
<h2 id="list列表处理"><a href="#list列表处理" class="headerlink" title="list列表处理"></a>list列表处理</h2><h3 id="1-有序列表"><a href="#1-有序列表" class="headerlink" title="1.有序列表"></a>1.有序列表</h3><p>输入数字“1”+“.”+空格 ， 自动开始有序列表。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150150-27a92.gif"></img></p>
<h3 id="2-无序列表"><a href="#2-无序列表" class="headerlink" title="2.无序列表"></a>2.无序列表</h3><p>输入“+”或“-”或“*”+空格，自动开始无序列表。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150150-de191.gif"></img></p>
<h3 id="3-table表格"><a href="#3-table表格" class="headerlink" title="3.table表格"></a>3.table表格</h3><p>Ctrl+T,在弹出的对话框中选择行列数，自动生成列表。 还可以很方便地对表格进行编辑。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150151-beafb.gif"></img></p>
<p>当然还有另外一种建立表格的方式用’|’分隔然后回车创建表格,使用ctrl+回车新添一行</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150152-8fe54.gif"></img></p>
<h3 id="4-分割线"><a href="#4-分割线" class="headerlink" title="4.分割线"></a>4.分割线</h3><p>输入三个或三个以上“-”（“*”），再按回车键，即出现一条分割线。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150153-b207d.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<h3 id="5-插入"><a href="#5-插入" class="headerlink" title="5.插入"></a>5.插入</h3><p>插入本地图片：直接把图片拖入即可； 插入网络图片：<img src="/%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5" alt="图片标题">。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150153-3a19e.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<h3 id="6-链接"><a href="#6-链接" class="headerlink" title="6.链接"></a>6.链接</h3><p>[链接提示]+(链接地址)。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150155-b1d2d.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<h3 id="7-数学公式"><a href="#7-数学公式" class="headerlink" title="7.数学公式"></a>7.数学公式</h3><p>“$$”+回车。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150156-5068f.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<h3 id="8-代码"><a href="#8-代码" class="headerlink" title="8.代码"></a>8.代码</h3><p>行内代码：代码的两端各加一个“&#96;”号，（在Tab键上面，英文输入法）。 代码块：输入三个“~”，按回车键，即可选择编程语言。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150156-28824.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150157-a4ffa.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<hr>
<h2 id="导出多种格式文件"><a href="#导出多种格式文件" class="headerlink" title="导出多种格式文件"></a>导出多种格式文件</h2><p>typora 的文件导入&#x2F;导出功能使用 Pandoc 把 Markdown 源码转换成不同的文件格式，所以我们如果想使用文件导入&#x2F;导出功能，必须先安装 Pandoc。</p>
<p><img src="https://www.typora.net/wp-content/uploads/2019/10/20191024150158-4721a.gif" alt="win上好用的Markdown编辑工具Typora教程"></p>
<hr>
<hr>
<p>转载于<a href="https://www.typora.net/527.html">Typora使用教程</a></p>
]]></content>
  </entry>
  <entry>
    <title>interview</title>
    <url>/2024/06/10/interview/</url>
    <content><![CDATA[<h2 id="文字处理"><a href="#文字处理" class="headerlink" title="文字处理"></a>文字处理</h2><h3 id="1-标题"><a href="#1-标题" class="headerlink" title="1.标题"></a>1.标题</h3><p>标题一共有六级,是用“#”实现的，标题前面加一个“#”，代表一级标题；依次类推，标题前面加六个“#”代表六级标题；一共有六级标题，编辑各种文档完全够用,左侧的目录会根据输入的标题自动生成响应的层级。</p>
]]></content>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Css知识点</title>
    <url>/2024/06/10/css/</url>
    <content><![CDATA[<h2 id="文字处理"><a href="#文字处理" class="headerlink" title="文字处理"></a>文字处理</h2><h3 id="1-标题"><a href="#1-标题" class="headerlink" title="1.标题"></a>1.标题</h3><p>标题一共有六级,是用“#”实现的，标题前面加一个“#”，代表一级标题；依次类推，标题前面加六个“#”代表六级标题；一共有六级标题，编辑各种文档完全够用,左侧的目录会根据输入的标题自动生成响应的层级。</p>
]]></content>
      <tags>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>Html知识点</title>
    <url>/2024/06/10/html/</url>
    <content><![CDATA[<h2 id="文字处理"><a href="#文字处理" class="headerlink" title="文字处理"></a>文字处理</h2><h3 id="1-标题"><a href="#1-标题" class="headerlink" title="1.标题"></a>1.标题</h3><p>标题一共有六级,是用“#”实现的，标题前面加一个“#”，代表一级标题；依次类推，标题前面加六个“#”代表六级标题；一共有六级标题，编辑各种文档完全够用,左侧的目录会根据输入的标题自动生成响应的层级。</p>
]]></content>
      <categories>
        <category>面试</category>
      </categories>
  </entry>
  <entry>
    <title>Vue知识点</title>
    <url>/2024/06/10/vue/</url>
    <content><![CDATA[<h2 id="文字处理"><a href="#文字处理" class="headerlink" title="文字处理"></a>文字处理</h2><h3 id="1-标题"><a href="#1-标题" class="headerlink" title="1.标题"></a>1.标题</h3><p>标题一共有六级,是用“#”实现的，标题前面加一个“#”，代表一级标题；依次类推，标题前面加六个“#”代表六级标题；一共有六级标题，编辑各种文档完全够用,左侧的目录会根据输入的标题自动生成响应的层级。</p>
]]></content>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Js初级+进阶</title>
    <url>/2024/06/10/js/</url>
    <content><![CDATA[<h2 id="文字处理"><a href="#文字处理" class="headerlink" title="文字处理"></a>文字处理</h2><h3 id="1-标题"><a href="#1-标题" class="headerlink" title="1.标题"></a>1.标题</h3><p>标题一共有六级,是用“#”实现的，标题前面加一个“#”，代表一级标题；依次类推，标题前面加六个“#”代表六级标题；一共有六级标题，编辑各种文档完全够用,左侧的目录会根据输入的标题自动生成响应的层级。</p>
]]></content>
      <tags>
        <tag>Js</tag>
      </tags>
  </entry>
  <entry>
    <title>Git 在hexo d上传时出现的Username for ‘https://github.com‘问题解决：</title>
    <url>/2024/06/10/git/</url>
    <content><![CDATA[<h2 id="Git报错"><a href="#Git报错" class="headerlink" title="Git报错"></a>Git报错</h2><p><img src="/2024/06/10/git/5ada1b97aee34f2cad440f82bde6c474.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h3 id="1-可能性一：账号出错"><a href="#1-可能性一：账号出错" class="headerlink" title="1.可能性一：账号出错"></a>1.可能性一：账号出错</h3><p>在git命令中的username指的是用户的邮箱而非github自己取的名字</p>
<p>密码是git登录密码，但是由于在2021&#x2F;8&#x2F;13开始取消了账号密码方式，所以密码可以输入个人访问令牌，令牌获取方式如下：</p>
<p>首先点击settings，然后点击developer seetings，选择Tokens</p>
<span id="more"></span>

<p><img src="/2024/06/10/git/0fb1d6736de146569606fd7448644684.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/2024/06/10/git/93d62b9a84804bf8ae8d3ea9e72b967b.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/2024/06/10/git/0bf27dad6bf84cda878c177be8839119.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/2024/06/10/git/480ed545a5764de4acd881e885ea59ce.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/2024/06/10/git/e8022577ff634eccb1fc4b3c7dd609d8.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>设置成功后获得的token要立刻保存，因为只出现一次后面都不会出现了</p>
<p>把获得的token输入到密码栏就可以啦～</p>
<h3 id="可能性二：令牌过期"><a href="#可能性二：令牌过期" class="headerlink" title="可能性二：令牌过期"></a>可能性二：令牌过期</h3><p>回到github页面查看令牌是否过期，若过期重新选择时间就好会重新刷新的。</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
  </entry>
  <entry>
    <title>weichart</title>
    <url>/2024/06/10/weichart/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>第一章：开篇.assets</title>
    <url>/2024/10/07/%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E5%BC%80%E7%AF%87-assets/</url>
    <content><![CDATA[<h1 id="第一章：开篇"><a href="#第一章：开篇" class="headerlink" title="第一章：开篇"></a>第一章：开篇</h1><p>慕课网的小伙伴本大家好，我是 <code>Sunday</code></p>
<p>这次给大家带来的课程是 <strong>基于 Vue 3 最新语法标准，后台前端综合解决方案</strong></p>
<h2 id="vue-的最新变化"><a href="#vue-的最新变化" class="headerlink" title="vue 的最新变化"></a>vue 的最新变化</h2><p>自从 <code>vue</code> 在 <code>2020年09月18日</code> 发布了 <code>3.0</code> 的版本之后，很多开发者都开始尝试被大受推崇的 <code>Composition API</code> ，但是在经过了短期的追捧之后，大家却发现，在企业中 <code>Composition API</code> 却并没有被大范围的普及，很多的公司虽然升级到了 <code>vue 3</code> ，但却依然使用着 <code>options API</code> 语法。</p>
<p>追其根本，原因还是在 <code>Composition API</code> 所提供的 <code>setup 函数语法</code> 中，如果你使用 <code>setup 函数语法</code> ，那么你得到的代码可能是这样的：</p>
<img src="第三章：项目架构之搭建登录架 构解决方案与实现.assets/image-20210908103648564.png" alt="image-20210908103648564" style="zoom:67%;" />

<p>此时我们想要在 <code>template</code> 中使用一个 <strong>响应式数据</strong>，不但要通过 <code>ref</code> 进行声明，还需要在 <code>setup</code> 函数中进行 <code>return</code> 操作。同样方法也是如此。</p>
<p>那么当我们的一个项目足够复杂时，这样的一种结构形式就会变得 <strong>非常的难看</strong> 并且 <strong>难以维护</strong></p>
<p>而这样的问题作为 <code>vue</code> 官方也是看到了的。</p>
<p>所以说在 <code>vue3</code> 仅仅发布了一个月之后，也就是在 <code>2020年10月28</code> ，<code>Vue</code> 就提出了一个 <code>RFC</code> ，尝试新的方式来废弃掉这种 <code>setup 函数式</code> 语法。</p>
<p>时隔一年，在 <code>2021年8月5日</code> ，伴随着 <code>vue 3.2</code> 的发布，<code>vue</code> 正式推出了全新的 <code>composition API</code> 语法标准 <code>script-setup</code> </p>
<p><code>script-setup</code> 的推出，标记着 <code>setup 函数式语法</code> 正式称为过去式！</p>
<p>基于 <code>script-setup 语法标准</code> ，我们再去实现之前的业务，代码则变成了这样：</p>
<img src="/Users/icetwo/Desktop/project/源码/nodes/第一章：开篇.assets/image-20211014190033745.png" alt="image-20211014190033745" style="zoom:67%;" />

<p>原本 25 行的代码量被压缩到了 14 行，并且大家可以发现，现在我们可以像 <strong>写普通的 <code>js</code> 一样去写 <code>vue</code> 了</strong> </p>
<p>除此之外 <code>vue3.2</code> 版本还带来了很多其他的巨大改变，比如：</p>
<ol>
<li>耗时一年才发布的全新响应式优化</li>
<li>组件状态驱动的动态 <code>CSS</code> 值</li>
<li>…</li>
</ol>
<p>这些新的改变，我们在开篇这里就不再赘述了</p>
<h2 id="后台系统的广泛性"><a href="#后台系统的广泛性" class="headerlink" title="后台系统的广泛性"></a>后台系统的广泛性</h2><p>而对于后台系统而言，相信只要是前端开发的工程师，那么就不陌生了。</p>
<img src="/Users/icetwo/Desktop/project/源码/nodes/第一章：开篇.assets/image-20211014192615333.png" alt="image-20211014192615333" style="zoom:67%;" />

<p>如图所示，根据我们之前的多次数据统计分析，在 1-5 年经验的前端开发者中，后台管理系统的项目占比为 <code>59.62%</code> 。为前端开发中最为重要的工作方向。</p>
<h2 id="项目功能介绍"><a href="#项目功能介绍" class="headerlink" title="项目功能介绍"></a>项目功能介绍</h2><p>而我们本次的课程则是专门针对于这种最为重要的工作方向，抽离出其中几十个经典业务模型，争取可以制作出覆盖大家大部分后台开发业务场景的综合性解决方案。</p>
<p>具体业务模型有：</p>
<ol>
<li>基于最新 <code>vue</code> 标准的：<ol>
<li>script setup 语法标准</li>
<li>最新的响应式变更</li>
<li>组件状态驱动的动态 css</li>
<li>最新 <code>vue</code> 全家桶</li>
</ol>
</li>
<li>基于大厂编程规范的：<ol>
<li>eslint</li>
<li>prettier</li>
<li>Commitizen</li>
<li>husky</li>
<li>commitlint</li>
<li>pre-commit</li>
<li>lint-staged</li>
</ol>
</li>
<li>以及：<ol>
<li>Svg Sprite Icon</li>
<li>环境变量处理方案</li>
<li>接口模块封装方案</li>
<li>请求动作封装方案</li>
<li>token 处理方案</li>
<li>登录鉴权方案</li>
<li>主动登出方案</li>
<li>被动登出方案</li>
<li>动态路由表处理方案</li>
<li>动态菜单项处理方案</li>
<li>动态面包屑处理方案</li>
<li>联动处理</li>
<li>动画处理</li>
<li>国际化处理方案</li>
<li>动态主题处理方案</li>
<li>全屏处理方案</li>
<li>页面检索处理方案</li>
<li>TagsView 处理方案</li>
<li>功能引导处理方案</li>
<li>多组件</li>
<li>基于文件选择的 Excel 导入方案</li>
<li>基于文件拖拽的 Excel 导入方案</li>
<li>Excel 数据导出方案</li>
<li>RBAC 的权限分控体系</li>
<li>动态权限设定</li>
<li>页面权限处理方案</li>
<li>功能权限处理方案</li>
<li>动态表格处理方案</li>
<li>拖拽表格处理方案</li>
<li>辅助库选择标准</li>
<li>markdown 编辑器处理</li>
<li>富文本编辑器处理</li>
<li>打包优化处理方案</li>
<li>服务器、域名购买与备案标准</li>
<li>前端项目部署方案</li>
</ol>
</li>
</ol>
<p>等一揽子处理方案内容</p>
<h2 id="详细的图文节"><a href="#详细的图文节" class="headerlink" title="详细的图文节"></a>详细的图文节</h2><p>每一小节的视频都会对应详细的图文节内容</p>
<h2 id="项目功能演示"><a href="#项目功能演示" class="headerlink" title="项目功能演示"></a>项目功能演示</h2><h2 id="课程收获"><a href="#课程收获" class="headerlink" title="课程收获"></a>课程收获</h2><p>那么到这里相信大家对本课程中的内容应该有了一个大致的了解。</p>
<p>总结一下，学习完本课程之后，大家可以获取到如下三点收获：</p>
<ol>
<li>大厂标准的编程规范</li>
<li>明星级项目的架构设计</li>
<li>数十个经典业务模型以及对应的解决方案</li>
</ol>
<p>足够帮助你在 面试 或者 晋升 中脱颖而出！</p>
<h2 id="适应人群"><a href="#适应人群" class="headerlink" title="适应人群"></a>适应人群</h2><p>因为本课程为通用的解决方案课程，所以无论是：</p>
<ol>
<li>在校学生</li>
<li>新入职场的开发者</li>
<li>有一定开发经验的开发者</li>
</ol>
<p>都可以学习本课程的内容并获取到足够的收获！</p>
<p>那么还在犹豫什么呢？快来一起学习吧！</p>
]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>加餐 - 数据可视化解决方案（ECharts + AntV）</title>
    <url>/2024/10/07/AntV%EF%BC%89/</url>
    <content><![CDATA[<h1 id="第十四章：加餐-数据可视化解决方案（ECharts-AntV）"><a href="#第十四章：加餐-数据可视化解决方案（ECharts-AntV）" class="headerlink" title="第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）"></a>第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）</h1><h2 id="01：前言"><a href="#01：前言" class="headerlink" title="01：前言"></a>01：前言</h2><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p><code>Hello</code>，慕课网的小伙伴们大家好。</p>
<p>没错，我们又要给 <strong>后台前端综合解决方案</strong> 课程进行 “加餐” 了。</p>
<p>之前的时候，在咱们的 <code>QQ 群</code> 中，有同学说：</p>
<blockquote>
<p>老师能不能为课程增加一个 <strong>数据可视化</strong> 的功能呢？</p>
<p>我们在实际工作中会经常的用到。</p>
</blockquote>
<p><strong>大家会用到的，就是我们需要进行实现的！</strong></p>
<p>那么就 <strong>开搞！</strong></p>
<p>由此，才有了咱们这次的 <strong>第十四章 - 数据可视化解决方案（ECharts + AntV）</strong> </p>
<h3 id="更新内容"><a href="#更新内容" class="headerlink" title="更新内容"></a>更新内容</h3><p>大家可以点击 <a href="http://192.168.18.55:8080/#/chart">这里</a> 来查看最终的实现效果。</p>
<p>对于这次新增的内容，将会涉及到两个实际开发中最常用到的数据可视化类库：</p>
<ol>
<li><a href="https://echarts.apache.org/zh/index.html">ECharts</a></li>
<li><a href="https://antv.vision/zh/">AntV</a></li>
</ol>
<p>关于这两个库我们会在后面进行详细的讲解，这里就不去深入了。</p>
<p>利用这两个库我们将会实现 6 块图表：</p>
<ol>
<li>累计收益：柱状图 + 曲线图</li>
<li>日金额分析：横向柱状图（正负）</li>
<li>大区营销图示：饼图</li>
<li>关键云词：文档云图</li>
<li>营收业绩图示：百度地图 + <code>echarts</code> 的散点图</li>
<li>大区营销数据分析：表格数据分析图</li>
</ol>
<p>额外配合 <strong>其他类库</strong> 或 <strong><code>element-plus</code> 组件</strong> 来实现 <strong>各种数据联动</strong> 的效果。</p>
<p>同时这些功能同样继承咱们后台综合解决方案的各种特性功能，比如：<strong>国际化处理</strong></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>那么到这里，咱们新增的这些功能相信都已经给大家描述清楚了，那么大家还等什么呢？快点进入 <strong>数据可视化</strong> 的世界吧！</p>
<h2 id="02：明确需要导入的资源"><a href="#02：明确需要导入的资源" class="headerlink" title="02：明确需要导入的资源"></a>02：明确需要导入的资源</h2><p>因为咱们新增的功能涉及到了新的国际化文档和图片，所以我们需要在开发之前，先导入对应的资源。</p>
<p>资源主要有三个：</p>
<ol>
<li><code>lang</code> 文件夹：数据可视化部分的国际化文档</li>
<li><code>assets</code> 文件夹：数据可视化部分的图片资源</li>
<li><code>svg</code> 文件夹：数据可视化部分的 <code>svg</code></li>
</ol>
<p>这两个资源已经同步到 <a href="https://git.imooc.com/coding-542/resources">课程资源</a> 中，大家可以下载之后覆盖到 <strong>原项目</strong> 之中</p>
<h2 id="03：数据可视化大解析"><a href="#03：数据可视化大解析" class="headerlink" title="03：数据可视化大解析"></a>03：数据可视化大解析</h2><p>这一小节，我们来聊三个大家可能会比较关心的问题，也是实际开发中常见的一些疑惑。</p>
<ol>
<li>数据可视化场景</li>
<li>数据可视化常见解决方案</li>
<li>不同场景下解决方案是否具备通用性</li>
</ol>
<h3 id="数据可视化场景"><a href="#数据可视化场景" class="headerlink" title="数据可视化场景"></a>数据可视化场景</h3><p>根据业务来进行划分，在我们实际工作中，常见的可视化场景主要分为两种：</p>
<ol>
<li><p>大屏可视化：通常以一个单独的项目进行呈现，主要的目的是：<strong>把大量的数据以图表的形式在大屏中进行展示。</strong><br><img src="https://www.fanruan.com/images/finemax2-bolan.jpg"></p>
<p><img src="https://www.fanruan.com/images/finemax2-shishi.jpg"></p>
<p><img src="https://www.fanruan.com/images/finemax2-huiyi.jpg"></p>
</li>
<li><p>数据可视化：不以单独的项目进行呈现，通常被集成在后台系统之中。主要的目的是：<strong>把大量的数据以图表的形式在小屏（通常为普通电脑屏幕）中进行展示。</strong><br>![image-20220617152643275](&#x2F;Users&#x2F;icetwo&#x2F;Desktop&#x2F;project&#x2F;源码&#x2F;nodes&#x2F;第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets&#x2F;image-20220617152643275.png)</p>
</li>
</ol>
<h3 id="常见解决方案"><a href="#常见解决方案" class="headerlink" title="常见解决方案"></a>常见解决方案</h3><p> 由刚才的介绍可知，无论哪一种应用场景，数据可视化其实核心就是：<strong>通过图表展示数据</strong></p>
<p>那么明确了这个核心之后，我们其实就知道，所谓 <strong>数据可视化解决方案</strong> 指的其实就是：<strong>通过图表展示数据的解决方案</strong></p>
<p>所以对应的核心就是：<strong>如何构建图表</strong> 。</p>
<p>目前常见的数据可视化图表，主要有三个：</p>
<ol>
<li><a href="https://echarts.apache.org/zh/index.html">Apache ECharts</a>：由 <a href="https://zh.m.wikipedia.org/wiki/Apache%E8%BD%AF%E4%BB%B6%E5%9F%BA%E9%87%91%E4%BC%9A">Apache软件基金会</a> 提供，前身是百度 <code>Echarts</code>。提供了 <code>PC端</code> 和 移动端 的各种图表处理，应该也是大家最为熟悉的一个可视化图表库。</li>
<li><a href="https://antv.vision/zh">AntV</a>：由蚂蚁集团数据可视化团队发布，内部进行了库的细分：<ol>
<li><a href="https://g2.antv.vision/zh/examples/gallery">G2</a>：类似于 <code>Echarts</code> ，提供了各种常见的图表</li>
<li><a href="https://s2.antv.vision/zh/examples/">S2</a>：表格数据图形化，课程中的 <strong>大区营销数据分析</strong> ，就是基于此实现</li>
<li><a href="https://g6.antv.vision/zh/examples/gallery">G6</a>：数据关系可视化。比如脑图实现</li>
<li><a href="https://x6.antv.vision/zh/examples/gallery">X6</a>：图形编辑引擎。比如流程图、<code>ER</code> 图构建</li>
<li><a href="https://l7.antv.vision/zh/examples/gallery">L7</a>：地理空间数据可视化。与地图相关</li>
<li><a href="https://f2.antv.vision/zh/examples/gallery">F2</a>：移动端数据可视化。可以理解为 <code>G2</code> 的移动端版本</li>
<li><a href="https://ava.antv.vision/zh/examples/gallery">AVA</a>：可视化生成框架。可以理解为可视化的低代码框架</li>
</ol>
</li>
<li><a href="https://www.highcharts.com/">highcharts</a>：可以理解为另一个团队开发的 <code>Echarts</code> ，应用层中与 <code>Echarts</code> 相比，并无明显特点。</li>
</ol>
<p>由此可知，对于以上三个框架而言，<a href="https://echarts.apache.org/zh/index.html">Apache ECharts</a> 和 <a href="https://antv.vision/zh">AntV</a> 是我们在真实企业开发中，最最常使用的数据可视化框架，所以我们的课程也将主要围绕这两个框架来完成。</p>
<h3 id="不同场景下解决方案是否具备通用性"><a href="#不同场景下解决方案是否具备通用性" class="headerlink" title="不同场景下解决方案是否具备通用性"></a>不同场景下解决方案是否具备通用性</h3><p>那么我们说到现在，可能很多同学就已经感觉到了，所谓的数据可视化，其实是有很多细层的划分的。无论是从 <strong>应用场景中</strong> 还是从 <strong>解决方案中</strong>。</p>
<p>那么可能有很多同学就说了，那么我如果想要成为数据可视化开发专家，是需要把这些场景和技术全部都学习一遍吗？</p>
<p><strong>当然不是！！</strong></p>
<p>我们首先要明确，技术向来都是有通用性的，解决方案同样如此。</p>
<p>大家还记不记得我们刚才说过：</p>
<blockquote>
<p>xxxx，数据可视化其实核心就是：<strong>通过图表展示数据</strong></p>
<p>xxxx，所谓 <strong>数据可视化解决方案</strong> 指的其实就是：<strong>通过图表展示数据的解决方案</strong></p>
<p>所以对应的核心就是：<strong>如何构建图表</strong> 。</p>
</blockquote>
<p>无论是 <strong>大屏可视化</strong> 也好，<strong>数据可视化</strong> 也好，<code>ECharts</code> 也好，<code>AntV</code> 也好。本质上都绕不开这样的一个核心理念。</p>
<p>所以我们只需要掌握：<strong>如何根据数据，利用框架来绘制图表</strong> 这样的一个核心解决方案即可。在不同的业务场景中，我们只需要处理对应的不同业务就可以了。</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p>那么这一小节，我们主要描述了三块内容，希望可以通过这三块内容来为大家解决一些数据可视化层面的疑惑，无论是技术上的，还是业务上的。</p>
<h2 id="04：构建基础模块结构"><a href="#04：构建基础模块结构" class="headerlink" title="04：构建基础模块结构"></a>04：构建基础模块结构</h2><p>那么从这一小节开始，我们就来处理对应的数据可视化代码部分。</p>
<p>先立个目标，在本小节中我们将会处理两件事情：</p>
<ol>
<li>在现有的路由表之中，新增一个 <strong>公开路由 <code>chart</code></strong> ，表示咱们的数据可视化模块</li>
<li>处理 <code>chart</code> 组件的基本结构，划分出各个图表的区域</li>
</ol>
<h3 id="新增-chart"><a href="#新增-chart" class="headerlink" title="新增 chart"></a>新增 chart</h3><ol>
<li><p>新建 <code>src/views/chart/index.vue</code> 组件</p>
</li>
<li><p>在 <code>src/router/index.js</code> 中新增公开路由表：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/chart&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;chart&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">          <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;chart&quot; */</span> <span class="string">&#x27;@/views/chart/index&#x27;</span>),</span><br><span class="line">        <span class="attr">meta</span>: &#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;chart&#x27;</span>,</span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&#x27;chart&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="处理基本模块"><a href="#处理基本模块" class="headerlink" title="处理基本模块"></a>处理基本模块</h3><p>根据以下结构，分别创建对应的图表模块：</p>
<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220617170835377.png" alt="image-20220617170835377" style="zoom: 33%;" />

<ol>
<li><p>对应模块分别为：</p>
<ol>
<li>第一行：<ol>
<li>累计收益趋势图（<code>286px</code>）：<code>src/views/chart/components/trend/index.vue</code></li>
</ol>
</li>
<li>第二行：<ol>
<li>日金额分析图（<code>443px</code>）：<code>src/views/chart/components/horizontal-bar/index.vue</code></li>
<li>日历图（<code>443px</code>）：<code>src/views/chart/components/calendar/index.vue</code></li>
</ol>
</li>
<li>第三行：<ol>
<li>饼图（<code>240px</code>）：<code>src/views/chart/components/pie/index.vue</code></li>
<li>文档云图（<code>240px</code>）：<code>src/views/chart/components/word-cloud/index.vue</code></li>
<li>地图可视化（<code>500px</code>）：<code>src/views/chart/components/b-map/index.vue</code></li>
</ol>
</li>
<li>第四行：<ol>
<li><code>S2</code> 表格数据图示（<code>804px</code>）：<code>src/views/chart/components/table-sheet/index.vue</code></li>
</ol>
</li>
</ol>
</li>
<li><p>完成每个模块的基本初始化：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;模块名字&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 对应模块高度;</span><br><span class="line">  background-color: #bcbfc3;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/index.vue</code> 中导入各个模块，并构建样式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;chart-container&quot;&gt;</span><br><span class="line">    &lt;!-- 累计收益趋势图 --&gt;</span><br><span class="line">    &lt;trend-vue&gt;&lt;/trend-vue&gt;</span><br><span class="line">    &lt;!-- 第二行 --&gt;</span><br><span class="line">    &lt;el-row class=&quot;mt-20&quot; :gutter=&quot;20&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;16&quot;&gt;</span><br><span class="line">        &lt;!-- 日金额分析图 --&gt;</span><br><span class="line">        &lt;horizontal-bar-vue&gt;&lt;/horizontal-bar-vue&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;8&quot;&gt;</span><br><span class="line">        &lt;!-- 日历图 --&gt;</span><br><span class="line">        &lt;calendar-vue&gt;&lt;/calendar-vue&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;!-- 第三行 --&gt;</span><br><span class="line">    &lt;el-row class=&quot;mt-20&quot; :gutter=&quot;20&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;!-- 左侧内容 --&gt;</span><br><span class="line">        &lt;div class=&quot;chart-map-left&quot;&gt;</span><br><span class="line">          &lt;!-- 饼图 --&gt;</span><br><span class="line">          &lt;pie-vue&gt;&lt;/pie-vue&gt;</span><br><span class="line">          &lt;!-- 文档云图 --&gt;</span><br><span class="line">          &lt;word-cloud-vue class=&quot;mt-20&quot;&gt;&lt;/word-cloud-vue&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">        &lt;!-- 地图可视化 --&gt;</span><br><span class="line">        &lt;b-map-vue&gt;&lt;/b-map-vue&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- S2 表格数据图示 --&gt;</span><br><span class="line">    &lt;table-sheet-vue class=&quot;mt-20&quot;&gt;&lt;/table-sheet-vue&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import trendVue from &#x27;./components/trend&#x27;</span><br><span class="line">import horizontalBarVue from &#x27;./components/horizontal-bar&#x27;</span><br><span class="line">import calendarVue from &#x27;./components/calendar&#x27;</span><br><span class="line">import pieVue from &#x27;./components/pie&#x27;</span><br><span class="line">import wordCloudVue from &#x27;./components/word-cloud&#x27;</span><br><span class="line">import bMapVue from &#x27;./components/b-map&#x27;</span><br><span class="line">import tableSheetVue from &#x27;./components/table-sheet&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.mt-20 &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="05：累计收益-模块划分"><a href="#05：累计收益-模块划分" class="headerlink" title="05：累计收益-模块划分"></a>05：累计收益-模块划分</h2><p>在 <code>src/views/chart/components/trend/index.vue</code> 中，构建出左右两个模块，分别用来渲染：</p>
<ol>
<li>数据模块</li>
<li>图表模块</li>
</ol>
<p>具体代码如下：</p>
<ol>
<li><p>创建 <code>src/views/chart/components/trend/trend-chart.vue</code></p>
</li>
<li><p>创建 <code>src/views/chart/components/trend/trend-data.vue</code></p>
</li>
<li><p>在 <code>src/views/chart/components/trend/index.vue</code> 构建基本结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;el-row :gutter=&quot;32&quot;&gt;</span><br><span class="line">      &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">        &lt;trend-data-vue :data=&quot;chartTrendData&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">        &lt;trend-chart-vue :data=&quot;chartTrendData&quot; /&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import trendDataVue from &#x27;./trend-data.vue&#x27;</span><br><span class="line">import trendChartVue from &#x27;./trend-chart.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 286px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，模块划分完成</p>
<h2 id="06：累计收益-数据模块渲染"><a href="#06：累计收益-数据模块渲染" class="headerlink" title="06：累计收益-数据模块渲染"></a>06：累计收益-数据模块渲染</h2><p>结构划分完成之后，接下来我们渲染 <code>trend-data</code> 数据模块，该模块的基础渲染并不复杂，获取数据直接渲染即可。</p>
<ol>
<li><p>创建 <code>src/api/chart.js</code> 模块：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取累计收益明细</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartTrend</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/trend&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>因为该数据将会在 <code>chart</code> 和 <code>data</code> 中都被使用，所以我们在 <code>src/views/chart/components/trend/index.vue</code> 获取该数据：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">...</span><br><span class="line">import &#123; getChartTrend &#125; from &#x27;@/api/chart&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const chartTrendData = ref(&#123;&#125;)</span><br><span class="line">const getChartTrendData = async () =&gt; &#123;</span><br><span class="line">  const res = await getChartTrend()</span><br><span class="line">  chartTrendData.value = res</span><br><span class="line">&#125;</span><br><span class="line">getChartTrendData()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>template</code> 中控制 <strong>获取到数据之后进行渲染</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;32&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;chartTrendData.allAmount&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>把数据传递给 <code>trend-data-vue</code>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trend-data-vue</span> <span class="attr">:data</span>=<span class="string">&quot;chartTrendData&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>trend-data-vue</code> 中接收数据并进行渲染：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;trend-data-container&quot;&gt;</span><br><span class="line">    &lt;!-- 累计盈利 --&gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;title-name&quot;&gt;&#123;&#123; $t(&#x27;msg.chart.trendDataTitle&#x27;) &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;title-amount&quot;&gt;</span><br><span class="line">        &amp;yen;</span><br><span class="line">        &lt;span&gt;&#123;&#123; data.allAmount &#125;&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 今日新增 --&gt;</span><br><span class="line">    &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;item-name item-name-border-1&quot;&gt;</span><br><span class="line">        &#123;&#123; $t(&#x27;msg.chart.trendDataTadayAdded&#x27;) &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;item-amount&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;item-amount-number&quot;&gt;&#123;&#123; data.tadayAdded &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &#123;&#123; $t(&#x27;msg.chart.unit&#x27;) &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 今日支出 --&gt;</span><br><span class="line">    &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;item-name item-name-border-2&quot;&gt;</span><br><span class="line">        &#123;&#123; $t(&#x27;msg.chart.trendDataTadayExpend&#x27;) &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;item-amount&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;item-amount-number&quot;&gt;&#123;&#123; data.tadaySub &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &#123;&#123; $t(&#x27;msg.chart.unit&#x27;) &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 今日结余 --&gt;</span><br><span class="line">    &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;item-name item-name-border-3&quot;&gt;</span><br><span class="line">        &#123;&#123; $t(&#x27;msg.chart.trendDataTadayBalance&#x27;) &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;item-amount&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;item-amount-number&quot;&gt;&#123;&#123; data.tadayAmount &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &#123;&#123; $t(&#x27;msg.chart.unit&#x27;) &#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineProps &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">defineProps(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.trend-data-container &#123;</span><br><span class="line">  .title &#123;</span><br><span class="line">    padding: 12px 20px;</span><br><span class="line">    background: linear-gradient(to right, #0ea5e9, #6366f1);</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">    color: white;</span><br><span class="line">    .title-name &#123;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">    .title-amount &#123;</span><br><span class="line">      font-size: 24px;</span><br><span class="line">      margin-top: 4px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .item &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    align-items: center;</span><br><span class="line">    border-bottom: 1px solid #c9c9c9;</span><br><span class="line">    padding: 16px 0;</span><br><span class="line">    color: #666;</span><br><span class="line">    .item-name &#123;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      padding: 4px 0 4px 8px;</span><br><span class="line">    &#125;</span><br><span class="line">    .item-amount &#123;</span><br><span class="line">      font-size: 12px;</span><br><span class="line">      .item-amount-number &#123;</span><br><span class="line">        color: #333;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">        font-size: 20px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item-name-border-1 &#123;</span><br><span class="line">      border-left: 6px solid #409eff;</span><br><span class="line">    &#125;</span><br><span class="line">    .item-name-border-2 &#123;</span><br><span class="line">      border-left: 6px solid #e6a23c;</span><br><span class="line">    &#125;</span><br><span class="line">    .item-name-border-3 &#123;</span><br><span class="line">      border-left: 6px solid #67c23a;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，基础模块渲染完成</p>
<h2 id="07：countup-让你的数据动起来"><a href="#07：countup-让你的数据动起来" class="headerlink" title="07：countup - 让你的数据动起来"></a>07：countup - 让你的数据动起来</h2><p>数字直接展示，在数据可视化场景中未免不太好看。</p>
<p>所以我们期望让数字以动画的形式进行展示。</p>
<p>如果想要达到这样的目的，则需要借助：<a href="https://github.com/inorganik/countUp.js">countUp</a> 进行实现。</p>
<ol>
<li><p>安装 <a href="https://github.com/inorganik/countUp.js">countUp</a>：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i --save countup.js@2.2.0</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://github.com/inorganik/countUp.js">countUp</a> 的使用非常简单，我们只需要 <code>new CountUp(target, data, options)</code> ，得到实例触发 <code>start</code> 方法即可：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; CountUp &#125; from &#x27;countup.js&#x27;</span><br><span class="line">import &#123; onMounted, ref, defineProps &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">// 本月累计收益（万元）</span><br><span class="line">const titleAmountTarget = ref(null)</span><br><span class="line">// 今日新增收益</span><br><span class="line">const tadayAddedTarget = ref(null)</span><br><span class="line">// 今日新增支出</span><br><span class="line">const tadayExpendTarget = ref(null)</span><br><span class="line">// 今日结余</span><br><span class="line">const tadayBalanceTarget = ref(null)</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  const options = &#123;</span><br><span class="line">    // 小数点位</span><br><span class="line">    decimalPlaces: 2,</span><br><span class="line">    // 持续时间</span><br><span class="line">    duration: 1.5</span><br><span class="line">  &#125;</span><br><span class="line">  // 累计回款</span><br><span class="line">  new CountUp(titleAmountTarget.value, props.data.allAmount, options).start()</span><br><span class="line">  // 今日新增</span><br><span class="line">  new CountUp(tadayAddedTarget.value, props.data.tadayAdded, options).start()</span><br><span class="line">  // 今日支出</span><br><span class="line">  new CountUp(tadayExpendTarget.value, props.data.tadaySub, options).start()</span><br><span class="line">  // 今日结余</span><br><span class="line">  new CountUp(tadayBalanceTarget.value, props.data.tadayAmount, options).start()</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>​		不要忘记在 <code>template</code> 中定义对应的 <code>ref</code>！</p>
<h2 id="08：ECharts-使用指南与学习方案"><a href="#08：ECharts-使用指南与学习方案" class="headerlink" title="08：ECharts 使用指南与学习方案"></a>08：ECharts 使用指南与学习方案</h2><p>处理好数据展示之后，接下来我们来处理右侧的图表，该图表我们将基于 <code>ECharts</code> 来完成，所以 <strong>想要处理图表，首先需要先学习 <code>ECharts</code> ！</strong></p>
<p>安装 <code>ECharts</code> ，我们这里使用 <code>5.3.2</code> 的版本：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i --save echarts@5.3.2</span><br></pre></td></tr></table></figure>

<p><a href="https://echarts.apache.org/zh/index.html">点击进入 echarts 官网</a></p>
<p>参考 <a href="https://echarts.apache.org/handbook/zh/get-started/">基础入门</a> 完成基本的柱状图渲染。</p>
<p>由基础案例可以，想要利用 <code>ECharts</code> 完成基本的图表渲染，共分为 5 步：</p>
<ol>
<li><p>创建 <code>DOM</code> 容器，并指定大小（指定 <code>ref</code> 方便获取）</p>
</li>
<li><p>导入 <code>ECharts</code> 模块：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>利用 <code>echarts.init(target)</code> 方法，获取 <code>mChart</code> 实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">let</span> mChart</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  mChart = echarts.<span class="title function_">init</span>(target.<span class="property">value</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建 <code>options</code> 配置对象（ <strong><code>echarts</code> 渲染的核心，不同的 <code>options</code> 意味着不同的图表体现</strong> ）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  <span class="comment">// 图表标题配置  </span></span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="comment">// 标题文本   </span></span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;ECharts 入门示例&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 图例配置</span></span><br><span class="line">  <span class="attr">legend</span>: &#123;</span><br><span class="line">    <span class="comment">// 图例数据</span></span><br><span class="line">    <span class="attr">data</span>: [<span class="string">&#x27;销量&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// X 轴配置</span></span><br><span class="line">  <span class="attr">xAxis</span>: &#123;</span><br><span class="line">    <span class="comment">// 数据</span></span><br><span class="line">    <span class="attr">data</span>: [<span class="string">&#x27;衬衫&#x27;</span>, <span class="string">&#x27;羊毛衫&#x27;</span>, <span class="string">&#x27;雪纺衫&#x27;</span>, <span class="string">&#x27;裤子&#x27;</span>, <span class="string">&#x27;高跟鞋&#x27;</span>, <span class="string">&#x27;袜子&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Y 轴配置</span></span><br><span class="line">  <span class="attr">yAxis</span>: [&#123;&#125;],</span><br><span class="line">  <span class="comment">// 图表类型（可以指定多个）</span></span><br><span class="line">  <span class="attr">series</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 图表名字，对应 legend.data[0]</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;销量&#x27;</span>,</span><br><span class="line">      <span class="comment">// 图表的类型</span></span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">      <span class="comment">// 图表的数据</span></span><br><span class="line">      <span class="attr">data</span>: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后利用 <code>mChart.setOption</code> 方法配置 <code>options</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mChart.setOption(options)</span><br></pre></td></tr></table></figure>
</li>
<li><p>最终完整代码为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;trend-chart-container&quot; ref=&quot;target&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const target = ref(null)</span><br><span class="line">let mChart</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  mChart = echarts.init(target.value)</span><br><span class="line">  renderChart()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 图表渲染方法</span><br><span class="line"> */</span><br><span class="line">const renderChart = () =&gt; &#123;</span><br><span class="line">  const options = &#123;</span><br><span class="line">    // 图表标题配置</span><br><span class="line">    title: &#123;</span><br><span class="line">      // 标题文本</span><br><span class="line">      text: &#x27;ECharts 入门示例&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 图例配置</span><br><span class="line">    legend: &#123;</span><br><span class="line">      // 图例数据</span><br><span class="line">      data: [&#x27;销量&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">    // X 轴配置</span><br><span class="line">    xAxis: &#123;</span><br><span class="line">      // 数据</span><br><span class="line">      data: [&#x27;衬衫&#x27;, &#x27;羊毛衫&#x27;, &#x27;雪纺衫&#x27;, &#x27;裤子&#x27;, &#x27;高跟鞋&#x27;, &#x27;袜子&#x27;]</span><br><span class="line">    &#125;,</span><br><span class="line">    // Y 轴配置</span><br><span class="line">    yAxis: [&#123;&#125;],</span><br><span class="line">    // 图表类型（可以指定多个）</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        // 图表名字，对应 legend.data[0]</span><br><span class="line">        name: &#x27;销量&#x27;,</span><br><span class="line">        // 图表的类型</span><br><span class="line">        type: &#x27;bar&#x27;,</span><br><span class="line">        // 图表的数据</span><br><span class="line">        data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  mChart.setOption(options)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.trend-chart-container &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>通过以上代码我们可知：</p>
<ol>
<li>对于 <code>ECharts</code> 而言，开发流程几乎固定（5 步）</li>
<li>渲染图表的关键是 <code>options</code> 配置对象</li>
<li>配置对象可通过 <a href="https://echarts.apache.org/zh/option.html#title">配置项手册</a> 进行查看</li>
</ol>
<p>最后，想要学习 <code>ECharts</code> 怎么办？</p>
<p>答：需要经常 <strong>参考对照 <a href="https://echarts.apache.org/zh/option.html#title">配置项手册</a></strong> ！</p>
<h2 id="09：累计收益-柱状图与曲线图的混合渲染"><a href="#09：累计收益-柱状图与曲线图的混合渲染" class="headerlink" title="09：累计收益-柱状图与曲线图的混合渲染"></a>09：累计收益-柱状图与曲线图的混合渲染</h2><p>接下来我们就通过数据来渲染 <strong>累计收益图表</strong></p>
<ol>
<li><p>传递数据到 <code>src/views/chart/components/trend/trend-chart.vue</code> 中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/trend/index.vue</code> 中完成传递：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trend-chart-vue</span> <span class="attr">:data</span>=<span class="string">&quot;chartTrendData&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>根据数据构建全新的 <code>options</code> 配置对象：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="comment">// 鼠标移入之后的提示框配置</span></span><br><span class="line">    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">      <span class="comment">// 鼠标移入到坐标轴时，触发提示框</span></span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span>,</span><br><span class="line">      <span class="comment">// 移入坐标轴时，提示框的配置项</span></span><br><span class="line">      <span class="attr">axisPointer</span>: &#123;</span><br><span class="line">        <span class="comment">// 显示十字准星指示器</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;cross&#x27;</span>,</span><br><span class="line">        <span class="comment">// 指示器样式</span></span><br><span class="line">        <span class="attr">crossStyle</span>: &#123;</span><br><span class="line">          <span class="comment">// 色值</span></span><br><span class="line">          <span class="attr">color</span>: <span class="string">&#x27;#999&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 图例配置</span></span><br><span class="line">    <span class="attr">legend</span>: &#123;</span><br><span class="line">      <span class="comment">// 图例数据</span></span><br><span class="line">      <span class="attr">data</span>: [<span class="string">&#x27;月累计收益&#x27;</span>, <span class="string">&#x27;日收益曲线&#x27;</span>],</span><br><span class="line">      <span class="comment">// 图例位置</span></span><br><span class="line">      <span class="attr">right</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// echarts 网格绘制的位置，对应 上、右、下、左</span></span><br><span class="line">    <span class="attr">grid</span>: &#123;</span><br><span class="line">      <span class="attr">top</span>: <span class="number">20</span>,</span><br><span class="line">      <span class="attr">right</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">bottom</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">left</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="comment">// 计算边距时，包含标签</span></span><br><span class="line">      <span class="attr">containLabel</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// X 轴配置</span></span><br><span class="line">    <span class="attr">xAxis</span>: &#123;</span><br><span class="line">      <span class="comment">// 坐标轴类型，category：类目轴</span></span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">      <span class="comment">// 坐标轴数据</span></span><br><span class="line">      <span class="attr">data</span>: props.<span class="property">data</span>.<span class="property">monthAmountList</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">time</span>),</span><br><span class="line">      <span class="comment">// 刻度尺配置</span></span><br><span class="line">      <span class="attr">axisTick</span>: &#123;</span><br><span class="line">        <span class="comment">// 不显示坐标轴刻度</span></span><br><span class="line">        <span class="attr">show</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// y 轴配置</span></span><br><span class="line">    <span class="attr">yAxis</span>: &#123;</span><br><span class="line">      <span class="comment">// Y 轴类型，value：数值轴</span></span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">      <span class="comment">// 最小值</span></span><br><span class="line">      <span class="attr">min</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="comment">// 最大值</span></span><br><span class="line">      <span class="attr">max</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="comment">// 取整</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">parseInt</span>(value.<span class="property">max</span> * <span class="number">1.2</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 刻度上展示的文字</span></span><br><span class="line">      <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">        <span class="attr">formatter</span>: <span class="string">&#x27;&#123;value&#125; 万元&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 图表类型</span></span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      <span class="comment">// 第一个图表</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 图表名字，对应 legend.data[0]</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;月累计收益&#x27;</span>,</span><br><span class="line">        <span class="comment">// 图表类型</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">        <span class="comment">// 柱的宽度</span></span><br><span class="line">        <span class="attr">barWidth</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="comment">// 提示框展示配置</span></span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">          <span class="comment">// 提示框展示的内容</span></span><br><span class="line">          <span class="attr">valueFormatter</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value + <span class="string">&#x27;万元&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 数据源</span></span><br><span class="line">        <span class="attr">data</span>: props.<span class="property">data</span>.<span class="property">monthAmountList</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">amount</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 第二个图表</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 图表名字，对应 legend.data[1]</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;日收益曲线&#x27;</span>,</span><br><span class="line">        <span class="comment">// 图表类型</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">        <span class="comment">// 颜色</span></span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#6EC6D0&#x27;</span>,</span><br><span class="line">        <span class="comment">// 平滑</span></span><br><span class="line">        <span class="attr">smooth</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 提示框展示配置</span></span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">          <span class="comment">// 提示框展示的内容</span></span><br><span class="line">          <span class="attr">valueFormatter</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value + <span class="string">&#x27;万元&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 数据源</span></span><br><span class="line">        <span class="attr">data</span>: props.<span class="property">data</span>.<span class="property">dailyCurve</span>.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">amount</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>那么至此，混合图表渲染完成。</p>
</li>
</ol>
<h2 id="10：累计收益-混合图表的国际化处理"><a href="#10：累计收益-混合图表的国际化处理" class="headerlink" title="10：累计收益-混合图表的国际化处理"></a>10：累计收益-混合图表的国际化处理</h2><p>最后对于累计收益模块，我们需要处理 <strong>混合图表的国际化展示</strong>。</p>
<p>我们知道，想要国际化的处理其实被分为两种情况：</p>
<ol>
<li>在 <code>template</code> 中，利用 <code>$t</code> 方法处理国际化。这种情况下，当我们切换 <code>locale</code> 的时候，内容会自动重新渲染。就像在 <code>trend-data</code> 时一样。</li>
<li>在 <code>script</code> 中，利用 <code>i18n.t</code> 方法处理国际化。在这种情况下，当我们切换 <code>locale</code> 的时候，需要通过 <code>watchSwitchLang</code> 方法，监听语言变化，再利用 <code>i18n.t</code> 重新获取最新的语言内容才可以。</li>
</ol>
<p>那么我们当前就处于 <strong>场景二</strong> 之中。</p>
<p>据此，具体代码如下：</p>
<ol>
<li><p>生成 <code>i18n</code> 实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useI18n &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> i18n = <span class="title function_">useI18n</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改固定文本为 <code>i18n.t</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// 图例配置</span></span><br><span class="line">    <span class="attr">legend</span>: &#123;</span><br><span class="line">      <span class="comment">// 图例数据</span></span><br><span class="line">      <span class="attr">data</span>: [i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.monthIncome&#x27;</span>), i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.dayIncome&#x27;</span>)],</span><br><span class="line">      ...</span><br><span class="line">    &#125;,</span><br><span class="line">   ...</span><br><span class="line">    <span class="comment">// y 轴配置</span></span><br><span class="line">    <span class="attr">yAxis</span>: &#123;</span><br><span class="line">     ...</span><br><span class="line">      <span class="comment">// 刻度上展示的文字</span></span><br><span class="line">      <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">        <span class="attr">formatter</span>: <span class="string">`&#123;value&#125; <span class="subst">$&#123;i18n.t(<span class="string">&#x27;msg.chart.unit&#x27;</span>)&#125;</span>`</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 图表类型</span></span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      <span class="comment">// 第一个图表</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 图表名字，对应 legend.data[0]</span></span><br><span class="line">        <span class="attr">name</span>: i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.monthIncome&#x27;</span>),</span><br><span class="line">       ...</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">          <span class="comment">// 提示框展示的内容</span></span><br><span class="line">          <span class="attr">valueFormatter</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value + i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.unit&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 第一个图表</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 图表名字，对应 legend.data[1]</span></span><br><span class="line">        <span class="attr">name</span>: i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.dayIncome&#x27;</span>),</span><br><span class="line">       ...</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">          <span class="comment">// 提示框展示的内容</span></span><br><span class="line">          <span class="attr">valueFormatter</span>: <span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value + i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.unit&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后通过 <code>watchSwitchLang</code> 方法，重新触发 <code>renderChart</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; watchSwitchLang &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">watchSwitchLang</span>(renderChart)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="11：日历模块-日历数据基础渲染"><a href="#11：日历模块-日历数据基础渲染" class="headerlink" title="11：日历模块-日历数据基础渲染"></a>11：日历模块-日历数据基础渲染</h2><p>在 <code>src/views/chart/components/calendar/index.vue</code> 中，利用 <a href="https://element-plus.org/zh-CN/component/calendar.html">element-plus 的 calendar</a> 组件完成日历基本渲染：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    class=&quot;container&quot;</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      padding: 0</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;el-calendar class=&quot;calendar&quot; v-model=&quot;currentDate&quot;&gt;</span><br><span class="line">      &lt;template #dateCell=&quot;&#123; data &#125;&quot;&gt;</span><br><span class="line">        &lt;p :class=&quot;[data.isSelected ? &#x27;is-selected&#x27; : &#x27;&#x27;]&quot;&gt;</span><br><span class="line">          &lt;!-- 显示的内容 --&gt;</span><br><span class="line">          &#123;&#123;</span><br><span class="line">            data.day</span><br><span class="line">              .split(&#x27;-&#x27;)</span><br><span class="line">              .slice(2)</span><br><span class="line">              .join(&#x27;&#x27;)</span><br><span class="line">          &#125;&#125;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-calendar&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 选中的日期</span><br><span class="line">const currentDate = ref(new Date())</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 443px;</span><br><span class="line">  .calendar &#123;</span><br><span class="line">    ::v-deep .el-calendar__body &#123;</span><br><span class="line">      padding: 0 12px 12px;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">    &#125;</span><br><span class="line">    ::v-deep .el-calendar-day &#123;</span><br><span class="line">      height: 66px !important;</span><br><span class="line">      padding: 0 !important;</span><br><span class="line">      p &#123;</span><br><span class="line">        height: 100%;</span><br><span class="line">        padding: 8px;</span><br><span class="line">      &#125;</span><br><span class="line">      // 金额样式</span><br><span class="line">      .amount &#123;</span><br><span class="line">        font-size: 12px;</span><br><span class="line">      &#125;</span><br><span class="line">      // 正收益</span><br><span class="line">      .profit &#123;</span><br><span class="line">        background-color: #f3fff3;</span><br><span class="line">        span &#123;</span><br><span class="line">          color: #649840;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // 负收益</span><br><span class="line">      .loss &#123;</span><br><span class="line">        background-color: #ffe7e7;</span><br><span class="line">        span &#123;</span><br><span class="line">          color: #b65d59;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .is-selected &#123;</span><br><span class="line">        background-color: #d6f2ff;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>至此，基础的日历模块渲染完成。</p>
<h2 id="12：日历模块-定制数据可视化处理"><a href="#12：日历模块-定制数据可视化处理" class="headerlink" title="12：日历模块-定制数据可视化处理"></a>12：日历模块-定制数据可视化处理</h2><ol>
<li><p>在 <code>src/api/chart.js</code> 中定义日历图示数据接口：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日历图示数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartCalendar</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/calendar&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/calendar/index.vue</code> 中获取数据：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; getChartCalendar &#125; from &#x27;@/api/chart&#x27;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 获取数据</span><br><span class="line"> */</span><br><span class="line">const calendarListData = ref([])</span><br><span class="line">const getCalendarListData = async () =&gt; &#123;</span><br><span class="line">  const &#123; result &#125; = await getChartCalendar()</span><br><span class="line">  calendarListData.value = result</span><br><span class="line">&#125;</span><br><span class="line">getCalendarListData()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建方法 <code>getTadayAmount</code>，用于：<strong>返回指定日期收益数据，在日历中进行展示</strong>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回指定日期收益数据，在日历中进行展示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getTadayAmount</span> = date =&gt; &#123;</span><br><span class="line">  <span class="comment">// 根据日期，获取当日数据</span></span><br><span class="line">  <span class="keyword">const</span> tadayData = calendarListData.<span class="property">value</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">date</span> === date)</span><br><span class="line">  <span class="comment">// 判断当日数据是否存在</span></span><br><span class="line">  <span class="keyword">if</span> (!tadayData) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 获取当日收益</span></span><br><span class="line">  <span class="keyword">const</span> tadayAmount = tadayData.<span class="property">amount</span></span><br><span class="line">  <span class="keyword">return</span> tadayAmount</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>template</code> 中，添加当日金额视图：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">dateCell</span>=<span class="string">&quot;&#123; data &#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">&quot;[data.isSelected ? &#x27;is-selected&#x27; : &#x27;&#x27;]&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 显示的内容 --&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 当日金额 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;amount&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;getTadayAmount(data.day)&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; getTadayAmount(data.day) &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>为避免 <code>getTadayAmount</code> 被多次计算，创建简单的缓存处理：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 收益缓存数据。</span></span><br><span class="line"><span class="comment">// key 为日期</span></span><br><span class="line"><span class="comment">// val 为对应的 金额</span></span><br><span class="line"><span class="keyword">const</span> dateAmountList = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回指定日期收益数据，在日历中进行展示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getTadayAmount</span> = date =&gt; &#123;</span><br><span class="line">  <span class="comment">// 读取缓存数据</span></span><br><span class="line">  <span class="keyword">if</span> (dateAmountList.<span class="property">value</span>[date]) &#123;</span><br><span class="line">    <span class="keyword">return</span> dateAmountList.<span class="property">value</span>[date]</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对数据进行缓存</span></span><br><span class="line">  dateAmountList.<span class="property">value</span>[date] = tadayAmount</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> tadayAmount</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>至此，<strong>日历中可展示每日金额收益</strong></p>
</li>
<li><p>最后我们期望为 <strong>正收益添加 <code>profit</code></strong> 样式，为 <strong>负收益添加 <code>loss</code></strong> 样式</p>
</li>
<li><p>创建 <code>calendarItemBgClass</code> 方法，处理对应样式行为：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回日历的背景</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">calendarItemBgClass</span> = day =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">getTadayAmount</span>(day) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;profit&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">getTadayAmount</span>(day) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;loss&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>template</code> 中使用此方法：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&lt;template #dateCell=&quot;&#123; data &#125;&quot;&gt;</span><br><span class="line">  &lt;p</span><br><span class="line">    :class=&quot;[</span><br><span class="line">      data.isSelected ? &#x27;is-selected&#x27; : &#x27;&#x27;,</span><br><span class="line"><span class="addition">+      calendarItemBgClass(data.day)</span></span><br><span class="line">    ]&quot;</span><br><span class="line">  &gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此：基于日历图的数据渲染完成。</p>
<h2 id="13：日金额分析-横向与负坐标图表构建"><a href="#13：日金额分析-横向与负坐标图表构建" class="headerlink" title="13：日金额分析-横向与负坐标图表构建"></a>13：日金额分析-横向与负坐标图表构建</h2><p>接下来我们来处理日金额分析模块。</p>
<p>对于该模块而言，同样以 <strong>柱状图</strong> 的形式呈现，然而不同的是，它是一个横向的，并且具备负数。</p>
<p>所以说在本小节中我们需要构建一个 <strong>横向，包含负数的柱状图</strong>。以此对比 <strong>累计收益</strong> 的柱状图，相信可以让大家对 <code>ECharts</code> 的图表绘制有更深的理解。</p>
<ol>
<li><p>在 <code>src/api/chart.js</code> 中创建数据获取方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 指定日期的时段柱形数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartTimeAmount</span> = date =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/time/amount&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      date</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/horizontal-bar/index.vue</code> 中获取接口数据：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getChartTimeAmount &#125; from &#x27;@/api/chart&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 获取数据</span><br><span class="line"> */</span><br><span class="line">const data = ref([])</span><br><span class="line">const getData = async date =&gt; &#123;</span><br><span class="line">  const &#123; result &#125; = await getChartTimeAmount(date)</span><br><span class="line">  data.value = result</span><br><span class="line">  // 渲染图表</span><br><span class="line">&#125;</span><br><span class="line">getData()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据数据绘制图表，同时处理国际化内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getChartTimeAmount &#125; from &#x27;@/api/chart&#x27;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line">import &#123; onMounted, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">// 国际化相关</span><br><span class="line">import &#123; useI18n &#125; from &#x27;vue-i18n&#x27;</span><br><span class="line">import &#123; watchSwitchLang &#125; from &#x27;@/utils/i18n&#x27;</span><br><span class="line">const i18n = useI18n()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 图表初始化</span><br><span class="line"> */</span><br><span class="line">const target = ref(null)</span><br><span class="line">let mChart = null</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  mChart = echarts.init(target.value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 构建图表</span><br><span class="line"> */</span><br><span class="line">const renderChart = () =&gt; &#123;</span><br><span class="line">  const options = &#123;</span><br><span class="line">    // 鼠标移入之后的提示框配置</span><br><span class="line">    tooltip: &#123;</span><br><span class="line">      // 鼠标移入到坐标轴时，触发提示框</span><br><span class="line">      trigger: &#x27;axis&#x27;,</span><br><span class="line">      // 移入坐标轴时，提示框的配置项</span><br><span class="line">      axisPointer: &#123;</span><br><span class="line">        // 指示器展示阴影</span><br><span class="line">        type: &#x27;shadow&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 图例配置</span><br><span class="line">    legend: &#123;</span><br><span class="line">      // 图例数据</span><br><span class="line">      data: [</span><br><span class="line">        `$&#123;i18n.t(&#x27;msg.chart.income&#x27;)&#125;（$&#123;i18n.t(&#x27;msg.chart.unit&#x27;)&#125;）`,</span><br><span class="line">        `$&#123;i18n.t(&#x27;msg.chart.expend&#x27;)&#125;（$&#123;i18n.t(&#x27;msg.chart.unit&#x27;)&#125;）`,</span><br><span class="line">        `$&#123;i18n.t(&#x27;msg.chart.balance&#x27;)&#125;（$&#123;i18n.t(&#x27;msg.chart.unit&#x27;)&#125;）`</span><br><span class="line">      ],</span><br><span class="line">      // 图例位置</span><br><span class="line">      right: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    // echarts 网格绘制的位置，对应 上、右、下、左</span><br><span class="line">    grid: &#123;</span><br><span class="line">      top: 28,</span><br><span class="line">      right: 0,</span><br><span class="line">      bottom: 0,</span><br><span class="line">      left: 0,</span><br><span class="line">      // 计算边距时，包含标签</span><br><span class="line">      containLabel: true</span><br><span class="line">    &#125;,</span><br><span class="line">    // X 轴配置</span><br><span class="line">    xAxis: [</span><br><span class="line">      &#123;</span><br><span class="line">        // 数值轴，适用于连续数据</span><br><span class="line">        type: &#x27;value&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    // y 轴配置</span><br><span class="line">    yAxis: [</span><br><span class="line">      &#123;</span><br><span class="line">        // 坐标轴类型，category：类目轴</span><br><span class="line">        type: &#x27;category&#x27;,</span><br><span class="line">        // 刻度尺配置</span><br><span class="line">        axisTick: &#123;</span><br><span class="line">          // 不显示坐标轴刻度</span><br><span class="line">          show: false</span><br><span class="line">        &#125;,</span><br><span class="line">        // Y 轴数据</span><br><span class="line">        data: data.value.map(item =&gt; item.timeStr),</span><br><span class="line">        // 反向展示</span><br><span class="line">        inverse: true</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    // 图表类型</span><br><span class="line">    series: [</span><br><span class="line">      // 第一个图表：收益</span><br><span class="line">      &#123;</span><br><span class="line">        // 图表名字，对应 legend.data[0]</span><br><span class="line">        name: `$&#123;i18n.t(&#x27;msg.chart.income&#x27;)&#125;（$&#123;i18n.t(&#x27;msg.chart.unit&#x27;)&#125;）`,</span><br><span class="line">        // 图表类型</span><br><span class="line">        type: &#x27;bar&#x27;,</span><br><span class="line">        // 数据堆叠，两个相同的 stack 将会堆叠渲染</span><br><span class="line">        stack: &#x27;Total&#x27;,</span><br><span class="line">        // 标签配置</span><br><span class="line">        label: &#123;</span><br><span class="line">          // 展示</span><br><span class="line">          show: true,</span><br><span class="line">          // 右侧</span><br><span class="line">          position: &#x27;right&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 柱的颜色</span><br><span class="line">        color: &#x27;#6DC473&#x27;,</span><br><span class="line">        // 高亮配置</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">          // 聚焦当前高亮的数据所在的系列的所有图形</span><br><span class="line">          focus: &#x27;series&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 数据</span><br><span class="line">        data: data.value.map(item =&gt; item.income)</span><br><span class="line">      &#125;,</span><br><span class="line">      // 第二个图表：支出</span><br><span class="line">      &#123;</span><br><span class="line">        // 图表名字，对应 legend.data[1]</span><br><span class="line">        name: `$&#123;i18n.t(&#x27;msg.chart.expend&#x27;)&#125;（$&#123;i18n.t(&#x27;msg.chart.unit&#x27;)&#125;）`,</span><br><span class="line">        // 图表类型</span><br><span class="line">        type: &#x27;bar&#x27;,</span><br><span class="line">        // 数据堆叠，两个相同的 stack 将会堆叠渲染</span><br><span class="line">        stack: &#x27;Total&#x27;,</span><br><span class="line">        // 标签配置</span><br><span class="line">        label: &#123;</span><br><span class="line">          // 展示</span><br><span class="line">          show: true,</span><br><span class="line">          // 右侧</span><br><span class="line">          position: &#x27;right&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 柱的颜色</span><br><span class="line">        color: &#x27;#E47470&#x27;,</span><br><span class="line">        // 高亮配置</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">          // 聚焦当前高亮的数据所在的系列的所有图形</span><br><span class="line">          focus: &#x27;series&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 数据</span><br><span class="line">        data: data.value.map(item =&gt; item.expense)</span><br><span class="line">      &#125;,</span><br><span class="line">      // 第三个图表：结余</span><br><span class="line">      &#123;</span><br><span class="line">        // 图表名字，对应 legend.data[2]</span><br><span class="line">        name: `$&#123;i18n.t(&#x27;msg.chart.balance&#x27;)&#125;（$&#123;i18n.t(&#x27;msg.chart.unit&#x27;)&#125;）`,</span><br><span class="line">        // 图表类型</span><br><span class="line">        type: &#x27;bar&#x27;,</span><br><span class="line">        // 标签配置</span><br><span class="line">        label: &#123;</span><br><span class="line">          // 展示</span><br><span class="line">          show: true,</span><br><span class="line">          // 内部</span><br><span class="line">          position: &#x27;inside&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 柱的颜色</span><br><span class="line">        color: &#x27;#83C0DF&#x27;,</span><br><span class="line">        // 高亮配置</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">          // 聚焦当前高亮的数据所在的系列的所有图形</span><br><span class="line">          focus: &#x27;series&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 数据</span><br><span class="line">        data: data.value.map(item =&gt; item.balance)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  mChart.setOption(options)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">watchSwitchLang(renderChart)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>最后对样式进行修正：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      paddingTop: &#x27;12px&#x27;</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;container&quot; ref=&quot;target&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 403px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，日金额分析模块渲染完成。</p>
<h2 id="14：非父子组件之间进行交互的三种方式"><a href="#14：非父子组件之间进行交互的三种方式" class="headerlink" title="14：非父子组件之间进行交互的三种方式"></a>14：非父子组件之间进行交互的三种方式</h2><p>在 <code>Vue</code> 的项目中，涉及到组件之间通讯，通常会有两种场景：</p>
<ol>
<li>父子组件通讯：这也是我们最常见的一种场景，可以通过 <code>props</code> 或 <code>emits</code> 来完成。</li>
<li>非父子组件通讯：这种情况相对比较复杂，因为两个无关的组件进行通讯必须要找到一个 <strong>“沟通者”</strong> ，这个沟通者必须可以与双方都进行通讯。通常情况下有三种方式：<ol>
<li>找到双方共同的父组件：通过子向父通讯，父向子通讯的方式<ol>
<li>优点：以现有技术即可完成</li>
<li>缺点：大量的跨组件处理事件，会导致逻辑变得非常复杂，各个组件之间的耦合性变强</li>
</ol>
</li>
<li>借助 <code>vuex</code>：因为 <code>vuex</code> 是可以与所有组件都进行交互的，所以可以借助它承担 “沟通者” 的角色<ol>
<li>优点：以现有技术即可完成</li>
<li>缺点：数据必须由 <code>Vuex</code> 处理，如果该数据之前没有存放在 <code>Vuex</code> 中，则需要进行较大的改动</li>
</ol>
</li>
<li>事件中心 <code>EventHub</code>：所谓事件中心其实就有一个 <strong>公开的单例</strong>，一般会提供 <code>emits 发送事件</code> 和 <code>on 监听事件</code> 两个方法。在 <code>Vue2</code> 中 <code>vm</code> 实例因为直接具备这两个方法，所以可以直接作为事件中心实例。而在 <code>Vue3</code> 中，取消了 <code>on</code> 方法，所以如果想要实现这种机制，则需要通过 <a href="https://github.com/developit/mitt">mitt</a> 来进行实现。<ol>
<li>优点：有利于组件之间的解耦，增加可维护性</li>
<li>缺点：当事件足够多时，会导致事件中心极其复杂</li>
</ol>
</li>
</ol>
</li>
</ol>
<p>那么综上所述，我们可知：<strong>如果只是进行少量的非父子组件通讯，那么通过 <code>EventHub</code> 的形式处理</strong> 是比较好的。</p>
<p>所以说，在接下来的 <strong>日历图与柱状图联动处理</strong> 中，我们将会通过 <strong>事件中心 <code>EventHub</code></strong> 的方式来完成。</p>
<h2 id="15：跨组件通讯-日历图与柱状图联动处理"><a href="#15：跨组件通讯-日历图与柱状图联动处理" class="headerlink" title="15：跨组件通讯-日历图与柱状图联动处理"></a>15：跨组件通讯-日历图与柱状图联动处理</h2><p>根据上一小节所述，我们知道在本小节中，我们将会通过 <strong>事件中心 <code>EventHub</code></strong> 来处理跨组件通讯。</p>
<ol>
<li><p>安装  <a href="https://github.com/developit/mitt">mitt</a>：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i --save mitt@3.0.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建 <code>src/utils/eventHub.js</code>，作为事件中心：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注意：</span></span><br><span class="line"><span class="comment"> * 这种方式在 Vue3 中，已经没有原生的实现，可以借助 mitt 进行实现。但是这种方式并不适合大范围的使用，因为很有可能会导致出现事件紊乱的错误。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">mitt</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/calendar/index.vue</code> 中，监听 <code>currentDate</code> 的变化，发送事件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;@/utils/eventHub&#x27;</span></span><br><span class="line"><span class="comment">// 选中的日期</span></span><br><span class="line"><span class="keyword">const</span> currentDate = <span class="title function_">ref</span>(<span class="keyword">new</span> <span class="title class_">Date</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 触发日期改变的事件</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">watch</span>(currentDate, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;calendarChange&#x27;</span>, val)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/horizontal-bar/index.vue</code> 中，通过 <code>on</code> 方法监听事件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 与日历图联通</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;calendarChange&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">getData</span>(val)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，日历图与柱状图联动完成。</p>
<h2 id="16：大区营销-饼图图表构建"><a href="#16：大区营销-饼图图表构建" class="headerlink" title="16：大区营销-饼图图表构建"></a>16：大区营销-饼图图表构建</h2><p>接下来我们来通过饼图展示大区营销数据。</p>
<p>相信大家经过前面的学习之后，饼图的绘制对于大家而言，应该并不是一个复杂的点了。</p>
<p>大家可以先尝试 <strong>通过查看 <code>ECharts</code> 文档的形式，自己先实现一下饼图的绘制</strong>，实现完成之后，再来学习本章，作为一个验证的过程，这种方式也是极好的。</p>
<p>那么下面我们就来看一下饼图的绘制：</p>
<ol>
<li><p>在 <code>src/api/chart.js</code> 中定义数据接口：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 饼图数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartPie</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/pie&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/pie/index.vue</code> 中通过接口获取数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getChartPie &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/chart&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> chartData = <span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getChartData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getChartPie</span>()</span><br><span class="line">  chartData.<span class="property">value</span> = res</span><br><span class="line">  <span class="comment">// 渲染图表</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getChartData</span>()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建基础的 <code>html</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      padding: 0</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div ref=&quot;target&quot; class=&quot;container&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 240px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>渲染图表，并处理国际化内容：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getChartPie &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/chart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useI18n &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; watchSwitchLang &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> i18n = <span class="title function_">useI18n</span>()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> target = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">let</span> mChart = <span class="literal">null</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  mChart = echarts.<span class="title function_">init</span>(target.<span class="property">value</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderChart</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="comment">// 标题</span></span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">text</span>: i18n.<span class="title function_">t</span>(<span class="string">&#x27;msg.chart.pieChartTitle&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 鼠标移入的提示</span></span><br><span class="line">    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">      <span class="comment">// &#123;b&#125;：数据名。&#123;c&#125;：数值。</span></span><br><span class="line">      <span class="attr">formatter</span>: <span class="string">`&#123;b&#125;: &#123;c&#125; <span class="subst">$&#123;i18n.t(<span class="string">&#x27;msg.chart.unit&#x27;</span>)&#125;</span>`</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 饼图</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">        <span class="comment">// 饼图的半径。第一项为内半径，第二项为外半径</span></span><br><span class="line">        <span class="attr">radius</span>: [<span class="string">&#x27;40%&#x27;</span>, <span class="string">&#x27;70%&#x27;</span>],</span><br><span class="line">        <span class="comment">// 每个 item 的样式</span></span><br><span class="line">        <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">          <span class="comment">// 圆角</span></span><br><span class="line">          <span class="attr">borderRadius</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="comment">// 边框色</span></span><br><span class="line">          <span class="attr">borderColor</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">          <span class="comment">// 边框宽度</span></span><br><span class="line">          <span class="attr">borderWidth</span>: <span class="number">2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 文字</span></span><br><span class="line">        <span class="attr">label</span>: &#123;</span><br><span class="line">          <span class="comment">// 默认不显示</span></span><br><span class="line">          <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="comment">// &#123;b&#125;：数据名。&#123;d&#125;：百分比。</span></span><br><span class="line">          <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;: &#123;d&#125;%&#x27;</span>,</span><br><span class="line">          <span class="comment">// 居中展示（在鼠标移入时）</span></span><br><span class="line">          <span class="attr">position</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 高亮状态的扇区和标签样式</span></span><br><span class="line">        <span class="attr">emphasis</span>: &#123;</span><br><span class="line">          <span class="comment">// 文本</span></span><br><span class="line">          <span class="attr">label</span>: &#123;</span><br><span class="line">            <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&#x27;22&#x27;</span>,</span><br><span class="line">            <span class="attr">fontWeight</span>: <span class="string">&#x27;bold&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">data</span>: chartData.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mChart.<span class="title function_">setOption</span>(options)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">watchSwitchLang</span>(renderChart)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，饼图渲染完成。</p>
<h2 id="17：文档云图-WordCloud-基础渲染"><a href="#17：文档云图-WordCloud-基础渲染" class="headerlink" title="17：文档云图-WordCloud 基础渲染"></a>17：文档云图-WordCloud 基础渲染</h2><p>对于 <code>ECharts</code> 而言，默认并没有提供文档云图的图表渲染，如果我们想要渲染文档云图的话，那么需要借助另外一个包：<a href="https://github.com/ecomfe/echarts-wordcloud">echarts-wordcloud</a></p>
<p>对于该包的使用非常简单，只需要在需要渲染文档云图时，指定：<code>import &#39;echarts-wordcloud&#39;;</code> 导入即可。</p>
<ol>
<li><p>安装 <code>echarts-wordcloud</code>：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install echarts-wordcloud@2.0.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义文档云图数据接口：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文字云图数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartWordCloud</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/wordcloud&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/word-cloud/index.vue</code> 中获取数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> wordCloudData = <span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getWordCloudData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getChartWordCloud</span>()</span><br><span class="line">  wordCloudData.<span class="property">value</span> = res</span><br><span class="line">  <span class="comment">// 渲染图表</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getWordCloudData</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建基本的 <code>html</code> 和 <code>css</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      padding: 0</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;container&quot; ref=&quot;target&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 240px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>渲染图表：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line">import &#x27;echarts-wordcloud&#x27;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; randomRGB &#125; from &#x27;@/utils/color&#x27;</span><br><span class="line">import &#123; getChartWordCloud &#125; from &#x27;@/api/chart.js&#x27;</span><br><span class="line">import &#123; useI18n &#125; from &#x27;vue-i18n&#x27;</span><br><span class="line">import &#123; watchSwitchLang &#125; from &#x27;@/utils/i18n&#x27;</span><br><span class="line"></span><br><span class="line">const i18n = useI18n()</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">const target = ref(null)</span><br><span class="line">let mChart = null</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  mChart = echarts.init(target.value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 渲染图表</span><br><span class="line"> */</span><br><span class="line">const renderChart = () =&gt; &#123;</span><br><span class="line">  var option = &#123;</span><br><span class="line">    title: &#123;</span><br><span class="line">      text: i18n.t(&#x27;msg.chart.cloudChartTitle&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    series: [</span><br><span class="line">      &#123;</span><br><span class="line">        // 类型</span><br><span class="line">        type: &#x27;wordCloud&#x27;,</span><br><span class="line">        // 数据映射文本的大小范围</span><br><span class="line">        sizeRange: [4, 80],</span><br><span class="line">        // 文字旋转范围</span><br><span class="line">        rotationRange: [0, 0],</span><br><span class="line">        // 单词之间的间距</span><br><span class="line">        gridSize: 0,</span><br><span class="line">        // 渲染动画</span><br><span class="line">        layoutAnimation: true,</span><br><span class="line">        // 字体</span><br><span class="line">        textStyle: &#123;</span><br><span class="line">          // 随机色值</span><br><span class="line">          color: randomRGB</span><br><span class="line">        &#125;,</span><br><span class="line">        // 高亮字体</span><br><span class="line">        emphasis: &#123;</span><br><span class="line">          textStyle: &#123;</span><br><span class="line">            fontWeight: &#x27;bold&#x27;,</span><br><span class="line">            color: &#x27;#000&#x27;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 数据</span><br><span class="line">        data: wordCloudData.value</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mChart.setOption(option)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">watchSwitchLang(renderChart)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建 <code>src/utils/color.js</code> ，暴露 <code>randomRGB</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成随机色值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">randomRGB</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>)</span><br><span class="line">  <span class="keyword">const</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>)</span><br><span class="line">  <span class="keyword">const</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">255</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>, <span class="subst">$&#123;g&#125;</span>, <span class="subst">$&#123;b&#125;</span>)`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，基础的文档云图渲染完成。</p>
<h2 id="18：文档云图-基于图形轮廓的绘制"><a href="#18：文档云图-基于图形轮廓的绘制" class="headerlink" title="18：文档云图-基于图形轮廓的绘制"></a>18：文档云图-基于图形轮廓的绘制</h2><p>目前咱们的文档云图已经绘制完成，但是目前的文档云图是有点难看的，我们期望它能够：<strong>在绘制文档的同时，预留出 <code>imooc</code> 的一个 <code>logo</code> 图形</strong></p>
<p>那么如果想要实现这个功能，则需要借助 <code>wordCloud</code> 的 <code>maskImage</code> 属性，通过该属性指定图形轮廓。</p>
<ol>
<li><p>在 <code>renderChart</code> 中，构建 <code>img</code> 实例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> wordcloudBg <span class="keyword">from</span> <span class="string">&#x27;@/assets/wordcloud.png&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 图像轮廓</span></span><br><span class="line"><span class="keyword">var</span> maskImage = <span class="keyword">new</span> <span class="title class_">Image</span>()</span><br><span class="line">maskImage.<span class="property">src</span> = wordcloudBg</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>series</code> 配置属性中，指定 <code>maskImage</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 绘制将排除图像的轮廓</span></span><br><span class="line"><span class="attr">maskImage</span>: maskImage,</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>等待图像加载完成之后</strong>，再设置 <code>Option</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 等待图像加载完成之后</span></span><br><span class="line">maskImage.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  mChart.<span class="title function_">setOption</span>(option)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>此时，绘制的文档即预留了指定的图形轮廓。</p>
<h2 id="19：地图可视化：百度地图-API-大解析"><a href="#19：地图可视化：百度地图-API-大解析" class="headerlink" title="19：地图可视化：百度地图 API 大解析"></a>19：地图可视化：百度地图 API 大解析</h2><p>接下来我们需要处理的是营收业绩图示，也就是地图可视化。</p>
<p>对于地图可视化而言，我们将使用百度地图结合 <code>ECharts</code> 进行绘制。</p>
<p>所以说想要完成地图可视化，首先我们需要：<strong>申请百度地图应用</strong>：</p>
<p>申请百度地图应用，将分为两部分讲解：</p>
<ol>
<li>注册开发者</li>
<li>申请应用</li>
</ol>
<h3 id="注册开发者"><a href="#注册开发者" class="headerlink" title="注册开发者"></a>注册开发者</h3><ol>
<li>打开 <a href="https://lbsyun.baidu.com/">百度地图 API</a></li>
<li>点击右上角登录按钮：<br>![image-20220620151244308](&#x2F;Users&#x2F;icetwo&#x2F;Desktop&#x2F;project&#x2F;源码&#x2F;nodes&#x2F;第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets&#x2F;image-20220620151244308.png)</li>
<li>选择立即注册（百度系账号通用）：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620151306708.png" alt="image-20220620151306708" style="zoom:33%;" /></li>
<li>完成注册：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620152256528.png" alt="image-20220620152256528" style="zoom: 25%;" /></li>
<li>账号注册成功之后，重新进入 <a href="https://lbsyun.baidu.com/">百度地图 API</a> 平台</li>
<li>点击控制台，注册称为开发者：<br>![image-20220620152435654](&#x2F;Users&#x2F;icetwo&#x2F;Desktop&#x2F;project&#x2F;源码&#x2F;nodes&#x2F;第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets&#x2F;image-20220620152435654.png)</li>
<li>咱们这里选择 <strong>个人开发者</strong>：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620152505670.png" alt="image-20220620152505670" style="zoom:50%;" /></li>
<li>同意即可：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620152527243.png" alt="image-20220620152527243" style="zoom: 33%;" /></li>
<li>填写开发者信息：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620152650595.png" alt="image-20220620152650595" style="zoom: 33%;" /></li>
<li>完善基本信息：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620152928493.png" alt="image-20220620152928493" style="zoom:25%;" /></li>
<li>上传身份证信息：<img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620153124739.png" alt="image-20220620153124739" style="zoom:25%;" /></li>
<li>因为我这边已经注册过了，所以只能进行到这个位置，后面就是最后一步，注册成功了。</li>
<li>注册成功之后，个人开发者应该是即时就可以生效的。</li>
</ol>
<p>至此，<strong>开发者信息创建完成</strong></p>
<p>接下来我们就需要创建对应的：<strong>应用信息</strong></p>
<h3 id="申请应用"><a href="#申请应用" class="headerlink" title="申请应用"></a>申请应用</h3><ol>
<li>登录账号之后，点击控制台，此时可以进入控制台页面</li>
<li>点击 <strong>应用管理 -&gt; 我的应用</strong> ，选择 <strong>创建应用</strong><img src="/Users/icetwo/Desktop/project/源码/nodes/第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets/image-20220620153659199.png" alt="image-20220620153659199" style="zoom:33%;" /></li>
<li>填入基本应用信息，<strong>重点：注意 <code>Referer白名单</code></strong> ，因为这个应用可能会被很多同学使用，所以我们填写的是 <code>*</code> ！ ：<br>![image-20220620153740557](&#x2F;Users&#x2F;icetwo&#x2F;Desktop&#x2F;project&#x2F;源码&#x2F;nodes&#x2F;第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets&#x2F;image-20220620153740557.png)</li>
<li>点击提交，应用创建完成，此时我们可以得到一个 **<code>访问应用（AK）</code>**：<code>Lw93eLNTRghjevtCP8rgYDqkMtcw4zU3</code> </li>
<li>大家如果不愿意走那么麻烦的注册流程，那么可以直接使用该 <code>AK</code></li>
</ol>
<p>那么到这里我们就已经完成了百度地图的应用创建，并且得到了对应的 <code>AK</code>。</p>
<p>那么有了此 <code>AK</code>，之后，接下来我们就可以完成对应的地图可视化渲染了。</p>
<h2 id="20：地图可视化：百度地图-ECharts-完成可视化渲染"><a href="#20：地图可视化：百度地图-ECharts-完成可视化渲染" class="headerlink" title="20：地图可视化：百度地图 + ECharts 完成可视化渲染"></a>20：地图可视化：百度地图 + ECharts 完成可视化渲染</h2><p>想要完成地图可视化，那么需要结合 <strong>百度地图</strong> 和 <code>ECharts</code> 的 <code>bmap.js</code> 模块才可以。</p>
<ol>
<li><p>在 <code>public/index.html</code> 中，导入百度地图 <code>API</code> （通用<code>AK</code>：<code>Lw93eLNTRghjevtCP8rgYDqkMtcw4zU3</code>）：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://api.map.baidu.com/api?v=3.0&amp;ak=$&#123;此处写入你的 AK &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/api/chart.js</code> 中，定义地图可视化数据接口：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 地图可视化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartMap</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/bmap&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/b-map/index.vue</code> 中，获取对应数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> chartData = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getChartData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getChartMap</span>()</span><br><span class="line">  chartData.<span class="property">value</span> = res</span><br><span class="line">  <span class="comment">// 渲染图表</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getChartData</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>注意：</strong> 此时服务端返回的数据包含两个属性：</p>
<ol>
<li><code>data</code>：所有的城市和对应数据</li>
<li><code>geoCoordMap</code>：所有城市和对应坐标</li>
</ol>
</li>
<li><p>该数据是 <strong>不可以</strong> 直接在地图可视化中进行渲染的，所以我们需要对该数据进行 <strong>重置</strong>：</p>
</li>
<li><p>期望重置为该格式数据：<br>![image-20220620162442734](&#x2F;Users&#x2F;icetwo&#x2F;Desktop&#x2F;project&#x2F;源码&#x2F;nodes&#x2F;第十四章：加餐 - 数据可视化解决方案（ECharts + AntV）.assets&#x2F;image-20220620162442734.png)</p>
</li>
<li><p>所以得出以下算法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据转化方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> convertData = <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="comment">// 返回值</span></span><br><span class="line">  <span class="keyword">const</span> res = []</span><br><span class="line">  <span class="comment">// 遍历所有城市数据</span></span><br><span class="line">  data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 根据城市名从 geoCoordMap 中获取对应坐标</span></span><br><span class="line">    <span class="keyword">const</span> geoCoord = chartData.<span class="property">value</span>.<span class="property">geoCoordMap</span>[item.<span class="property">name</span>]</span><br><span class="line">    <span class="comment">// 如果可以获取到坐标，则生成新的数据对象</span></span><br><span class="line">    <span class="keyword">if</span> (geoCoord) &#123;</span><br><span class="line">      <span class="comment">// 该数据对象为：</span></span><br><span class="line">      <span class="comment">// name：城市名</span></span><br><span class="line">      <span class="comment">// value：数组[经度、维度、数据]</span></span><br><span class="line">      res.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">value</span>: [...geoCoord, item.<span class="property">value</span>]</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>构建 <code>HTML</code> 和 <code>CSS</code> 结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    class=&quot;container&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;title&quot;&gt;&#123;&#123; $t(&#x27;msg.chart.bmapChartTitle&#x27;) &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div ref=&quot;target&quot; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  .title &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 28px;</span><br><span class="line">    margin-left: 50%;</span><br><span class="line">    transform: translateX(-50%);</span><br><span class="line">    color: #333;</span><br><span class="line">    font-size: 22px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    z-index: 9;</span><br><span class="line">  &#125;</span><br><span class="line">  .box &#123;</span><br><span class="line">    height: 462px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>导入 <code>ECharts</code> 中处理地图模块 <code>bmap</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入 bmap 模块</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;echarts/extension/bmap/bmap.js&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>完成图表渲染：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> i18n = <span class="title function_">useI18n</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化 echarts</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> target = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">let</span> mChart = <span class="literal">null</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  mChart = echarts.<span class="title function_">init</span>(target.<span class="property">value</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 渲染地图数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderBMap</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> options = &#123;</span><br><span class="line">    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 地图配置</span></span><br><span class="line">    <span class="attr">bmap</span>: &#123;</span><br><span class="line">      <span class="comment">// 中心点</span></span><br><span class="line">      <span class="attr">center</span>: [<span class="number">109.114129</span>, <span class="number">36.550339</span>],</span><br><span class="line">      <span class="comment">// 缩放级别</span></span><br><span class="line">      <span class="attr">zoom</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="comment">// 是否可拖动</span></span><br><span class="line">      <span class="attr">roam</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">`营收（<span class="subst">$&#123;i18n.t(<span class="string">&#x27;msg.chart.unit&#x27;</span>)&#125;</span>）`</span>,</span><br><span class="line">        <span class="comment">// 散点图</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;scatter&#x27;</span>,</span><br><span class="line">        <span class="comment">// 使用的表坐标</span></span><br><span class="line">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span><br><span class="line">        <span class="comment">// 数据源</span></span><br><span class="line">        <span class="attr">data</span>: <span class="title function_">convertData</span>(chartData.<span class="property">value</span>.<span class="property">data</span>),</span><br><span class="line">        <span class="comment">// 散点的大小</span></span><br><span class="line">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 数据使用下标为2的值（item.value[2]）</span></span><br><span class="line">        <span class="attr">encode</span>: &#123;</span><br><span class="line">          <span class="attr">value</span>: <span class="number">2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 鼠标移入时，高亮的标签样式</span></span><br><span class="line">        <span class="attr">emphasis</span>: &#123;</span><br><span class="line">          <span class="attr">label</span>: &#123;</span><br><span class="line">            <span class="comment">// 鼠标移入时，显示高亮</span></span><br><span class="line">            <span class="attr">show</span>: <span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 散点色值</span></span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#15803d&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">`营收 TOP 5（<span class="subst">$&#123;i18n.t(<span class="string">&#x27;msg.chart.unit&#x27;</span>)&#125;</span>）`</span>,</span><br><span class="line">        <span class="comment">// 包含涟漪特效动画的散点的散点图</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;effectScatter&#x27;</span>,</span><br><span class="line">        <span class="comment">// 使用的表坐标</span></span><br><span class="line">        <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span><br><span class="line">        <span class="comment">// 数据源（top 5）</span></span><br><span class="line">        <span class="attr">data</span>: <span class="title function_">convertData</span>(</span><br><span class="line">          chartData.<span class="property">value</span>.<span class="property">data</span></span><br><span class="line">            .<span class="title function_">sort</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span></span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">6</span>)</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 散点的大小</span></span><br><span class="line">        <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> val[<span class="number">2</span>] / <span class="number">10</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 数据使用下标为2的值（item.value[2]）</span></span><br><span class="line">        <span class="attr">encode</span>: &#123;</span><br><span class="line">          <span class="attr">value</span>: <span class="number">2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 涟漪特效</span></span><br><span class="line">        <span class="attr">rippleEffect</span>: &#123;</span><br><span class="line">          <span class="comment">// stroke 类型的波纹</span></span><br><span class="line">          <span class="attr">brushType</span>: <span class="string">&#x27;stroke&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 显示地名</span></span><br><span class="line">        <span class="attr">label</span>: &#123;</span><br><span class="line">          <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;&#x27;</span>,</span><br><span class="line">          <span class="attr">position</span>: <span class="string">&#x27;right&#x27;</span>,</span><br><span class="line">          <span class="attr">show</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 散点层级</span></span><br><span class="line">        <span class="attr">zlevel</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="comment">// 散点色值</span></span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;#166534&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  mChart.<span class="title function_">setOption</span>(options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，地图可视化渲染完成。</p>
<p>到此时，我们基于 <code>ECharts</code> 来实现的可视化内容，就已经全部完成。</p>
<p>接下来我们就将会基于 <code>AntV</code> 的 <code>S2</code> 模块，来实现 <strong>大区营销数据分析</strong> 图示！</p>
<h2 id="21：大区营销数据分析-基础结构渲染"><a href="#21：大区营销数据分析-基础结构渲染" class="headerlink" title="21：大区营销数据分析-基础结构渲染"></a>21：大区营销数据分析-基础结构渲染</h2><p>对于大区营销模块而言，首先我们需要先把它的基础结构进行渲染。</p>
<ol>
<li><p>创建 <code>src/views/chart/components/table-sheet/components/s2.vue</code> 作为图表渲染组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      padding: 0</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;container&quot; ref=&quot;target&quot;&gt;s2&lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 782px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>创建 <code>src/views/chart/components/table-sheet/components/sheet-label.vue</code> 作为大区渲染组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      padding: 0</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;sheet-label&lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  height: 112px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>在 <code>src/views/chart/components/table-sheet/index.vue</code> 中，渲染对应结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row :gutter=&quot;20&quot;&gt;</span><br><span class="line">    &lt;el-col :span=&quot;18&quot;&gt;</span><br><span class="line">      &lt;s2Vue /&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :span=&quot;6&quot;&gt;</span><br><span class="line">      &lt;sheetLabelVue v-for=&quot;item in 6&quot; :key=&quot;item&quot; class=&quot;mb-20&quot; /&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import s2Vue from &#x27;./components/s2.vue&#x27;</span><br><span class="line">import sheetLabelVue from &#x27;./components/sheet-label.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.mb-20 &#123;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，渲染出基本的结构模块。</p>
<h2 id="22：大区营销数据分析-渲染大区结构视图"><a href="#22：大区营销数据分析-渲染大区结构视图" class="headerlink" title="22：大区营销数据分析-渲染大区结构视图"></a>22：大区营销数据分析-渲染大区结构视图</h2><p>本小节我们来渲染右侧大区结构视图。</p>
<ol>
<li><p>在 <code>src/api/chart.js</code> 中定义大区数据获取接口：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 大区数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartRegions</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/regions&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/index.vue</code> 中获取数据，渲染视图：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getChartRegions &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/chart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; watchSwitchLang &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/i18n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取大区数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> regionsData = <span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getChartRegionsData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; regions &#125; = <span class="keyword">await</span> <span class="title function_">getChartRegions</span>()</span><br><span class="line">  regionsData.<span class="property">value</span> = regions</span><br><span class="line">  <span class="comment">// TODO：获取该大区对应的数据</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getChartRegionsData</span>()</span><br><span class="line"><span class="comment">// 切换语言，数据重新获取</span></span><br><span class="line"><span class="title function_">watchSwitchLang</span>(getChartRegionsData)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sheetLabelVue</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:data</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;item in regionsData&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;mb-20&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/components/sheet-label.vue</code> 中渲染数据：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card</span><br><span class="line">    class=&quot;mb-20&quot;</span><br><span class="line">    :body-style=&quot;&#123;</span><br><span class="line">      padding: 0</span><br><span class="line">    &#125;&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">      &lt;p class=&quot;title&quot;&gt;&#123;&#123; data.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;div class=&quot;desc&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; $t(&#x27;msg.chart.tadayReceivable&#x27;) &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;p class=&quot;profit&quot;&gt;</span><br><span class="line">          &amp;yen; &#123;&#123; data.receivable &#125;&#125;</span><br><span class="line">          &lt;span class=&quot;unit&quot;&gt;（&#123;&#123; $t(&#x27;msg.chart.unit&#x27;) &#125;&#125;）&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;desc&quot;&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; $t(&#x27;msg.chart.tadayBalance&#x27;) &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;p :class=&quot;data.balance &gt; 0 ? &#x27;profit&#x27; : &#x27;loss&#x27;&quot;&gt;</span><br><span class="line">          &amp;yen; &#123;&#123; data.balance &#125;&#125;</span><br><span class="line">          &lt;span class=&quot;unit&quot;&gt;（&#123;&#123; $t(&#x27;msg.chart.unit&#x27;) &#125;&#125;）&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineProps &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">defineProps(&#123;</span><br><span class="line">  // 数据源</span><br><span class="line">  data: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  background-color: #f2f3f9;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  .title &#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    margin-bottom: 8px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .desc &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    margin-top: 6px;</span><br><span class="line">    color: #999;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .unit &#123;</span><br><span class="line">    color: #999;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .profit &#123;</span><br><span class="line">    color: #649840;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .loss &#123;</span><br><span class="line">    color: #b65d59;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>基本视图渲染完成</p>
</li>
<li><p>接下来处理高亮点击行为</p>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/components/sheet-label.vue</code> 中定义：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="comment">// 是否被选中</span></span><br><span class="line">  <span class="attr">isSelected</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Boolean</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container &quot;</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; selected: isSelected &#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.selected</span> &#123;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">6px</span> solid <span class="number">#5172e9</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/index.vue</code> 中，定义选中数据：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  ...</span><br><span class="line">      &lt;sheetLabelVue</span><br><span class="line">        :isSelected=&quot;currentRegionsIndex === index&quot;</span><br><span class="line">        @click=&quot;onChangeRegion(index)&quot;</span><br><span class="line">        ...</span><br><span class="line">      /&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">...</span><br><span class="line">/**</span><br><span class="line"> * 获取大区数据</span><br><span class="line"> */</span><br><span class="line">const currentRegionsIndex = ref(0)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 切换大区</span><br><span class="line"> */</span><br><span class="line">const onChangeRegion = (index) =&gt; &#123;</span><br><span class="line">  currentRegionsIndex.value = index</span><br><span class="line">  // TODO：获取该大区对应的数据</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，大区结构视图渲染完成。</p>
<h2 id="23：大区营销数据分析-基于-AntV-S2-构建表格数据可视化"><a href="#23：大区营销数据分析-基于-AntV-S2-构建表格数据可视化" class="headerlink" title="23：大区营销数据分析-基于 AntV S2 构建表格数据可视化"></a>23：大区营销数据分析-基于 AntV S2 构建表格数据可视化</h2><p>接下来我们将基于 <a href="https://s2.antv.vision/zh/examples/gallery">AntV S2 模块</a> 来实现我们的表格数据可视化逻辑。</p>
<ol>
<li><p>首先安装 <code>@antv/s2</code> 到项目中：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i --save @antv/s2@1.19.0</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>s2</code> 的使用整体分为 6 步：</p>
<ol>
<li>按需导入 <code>TableSheet</code> 模块</li>
<li>创建 <code>DOM</code> 作为渲染的容器，并且需要指定宽高</li>
<li>构建 <a href="https://s2.antv.vision/zh/docs/api/general/S2DataConfig">S2DataConfig</a> 对象，为表的数据源</li>
<li>构建 <a href="https://s2.antv.vision/zh/docs/api/general/S2Options">S2Options</a> 对象，为表的配置对象</li>
<li>生成 <a href="https://s2.antv.vision/zh/docs/manual/basic/sheet-type/table-mode#tablesheet-%E7%B1%BB%E6%96%B9%E5%BC%8F">TableSheet</a> 实例，得到 <code>S2</code></li>
<li>触发 <code>s2.render()</code> 方法，完成表的渲染</li>
</ol>
</li>
<li><p>那么明确好了这 6 步之后，接下来我们就进行一下对应的实现。</p>
</li>
</ol>
<h3 id="基础渲染"><a href="#基础渲染" class="headerlink" title="基础渲染"></a>基础渲染</h3><ol>
<li><p>在 <code>src/api/chart.js</code> 中，定义数据接口：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 表格数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getChartSheet</span> = regionId =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/chart/sheets&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      regionId</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/index.vue</code> 获取对应数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getChartSheet &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/chart&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 大区对应的表格数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> sheetData = <span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getChartSheetData</span> = <span class="keyword">async</span> id =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getChartSheet</span>(id)</span><br><span class="line">  sheetData.<span class="property">value</span> = res</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getChartSheetData</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/components/s2.vue</code> 中定义 <code>props</code> 接收数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/index.vue</code> 中传递数据：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">s2Vue</span> <span class="attr">:data</span>=<span class="string">&quot;sheetData&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/components/s2.vue</code> 中获取指定 <code>DOM</code>，并生成 <code>s2</code> 实例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, watch, defineProps, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; TableSheet &#125; from &#x27;@antv/s2&#x27;</span><br><span class="line">import &#123; useI18n &#125; from &#x27;vue-i18n&#x27;</span><br><span class="line"></span><br><span class="line">const i18n = useI18n()</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    type: Array,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const target = ref(null)</span><br><span class="line">let s2 = null</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  // 数据对象</span><br><span class="line">  const s2DataCfg = &#123;</span><br><span class="line">    fields: &#123;</span><br><span class="line">      columns: [</span><br><span class="line">        &#x27;province&#x27;,</span><br><span class="line">        &#x27;city&#x27;,</span><br><span class="line">        &#x27;coverage&#x27;,</span><br><span class="line">        &#x27;receivable&#x27;,</span><br><span class="line">        &#x27;actual&#x27;,</span><br><span class="line">        &#x27;balance&#x27;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    meta: [</span><br><span class="line">      // 列头字段对应的元信息，比如展示的中文名</span><br><span class="line">      &#123;</span><br><span class="line">        field: &#x27;province&#x27;,</span><br><span class="line">        name: i18n.t(&#x27;msg.chart.sheetProvince&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        field: &#x27;city&#x27;,</span><br><span class="line">        name: i18n.t(&#x27;msg.chart.sheetCity&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        field: &#x27;coverage&#x27;,</span><br><span class="line">        name: i18n.t(&#x27;msg.chart.sheetCoverage&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        field: &#x27;receivable&#x27;,</span><br><span class="line">        name: i18n.t(&#x27;msg.chart.sheetReceivable&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        field: &#x27;actual&#x27;,</span><br><span class="line">        name: i18n.t(&#x27;msg.chart.sheetActual&#x27;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        field: &#x27;balance&#x27;,</span><br><span class="line">        name: i18n.t(&#x27;msg.chart.sheetBalance&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    data: props.data</span><br><span class="line">  &#125;</span><br><span class="line">  // 配置对象</span><br><span class="line">  const s2Options = &#123;</span><br><span class="line">    // 宽度：必须为准确的像素</span><br><span class="line">    width: target.value.clientWidth,</span><br><span class="line">    // 高度：必须为准确的像素</span><br><span class="line">    height: target.value.clientHeight,</span><br><span class="line">    // 是否显示行序号</span><br><span class="line">    showSeriesNumber: true,</span><br><span class="line">    // 条件模式配置</span><br><span class="line">    conditions: &#123;</span><br><span class="line">      // 背景字段标记</span><br><span class="line">      background: [</span><br><span class="line">        &#123;</span><br><span class="line">          // 设置背景的字段</span><br><span class="line">          field: &#x27;balance&#x27;,</span><br><span class="line">          // 映射函数</span><br><span class="line">          mapping(fieldValue) &#123;</span><br><span class="line">            console.log(fieldValue)</span><br><span class="line">            return &#123;</span><br><span class="line">              fill: fieldValue &gt; 0 ? &#x27;#f3fff3&#x27; : &#x27;#ffe7e7&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // 生成 S2 实例</span><br><span class="line">  s2 = new TableSheet(target.value, s2DataCfg, s2Options)</span><br><span class="line">  // 渲染视图</span><br><span class="line">  s2.render(true)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此基础表格渲染成功</p>
<h2 id="24：大区营销数据分析-表格图谱与大区联动"><a href="#24：大区营销数据分析-表格图谱与大区联动" class="headerlink" title="24：大区营销数据分析-表格图谱与大区联动"></a>24：大区营销数据分析-表格图谱与大区联动</h2><p>当表格渲染成功之后，下面我们要处理表格和大区的联动，我们期望，当切换不同大区时，表格的数据可以切换展示。</p>
<ol>
<li><p>在大区数据获取完成后，触发 <code>getChartSheetData</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getChartRegionsData</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// TODO：获取该大区对应的数据</span></span><br><span class="line">  <span class="title function_">getChartSheetData</span>(regionsData.<span class="property">value</span>[<span class="number">0</span>].<span class="property">id</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>onChangeRegion</code> 切换大区时，重新触发 <code>getChartSheetData</code> 方法：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 切换大区</span><br><span class="line"> */</span><br><span class="line">const onChangeRegion = (index) =&gt; &#123;</span><br><span class="line">  currentRegionsIndex.value = index</span><br><span class="line">  // TODO：获取该大区对应的数据</span><br><span class="line"><span class="addition">+  getChartSheetData(regionsData.value[index].id)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>src/views/chart/components/table-sheet/components/s2.vue</code> 中，监听 <code>data</code> 的变化，触发 <code>render</code> 函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 配置对象</span></span><br><span class="line">  <span class="keyword">const</span> s2Options = &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 生成 S2 实例，数据对象置为 null</span></span><br><span class="line">  s2 = <span class="keyword">new</span> <span class="title class_">TableSheet</span>(target.<span class="property">value</span>, &#123;&#125;, s2Options)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 图标渲染函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">renderChart</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 数据对象</span></span><br><span class="line">  <span class="keyword">const</span> s2DataCfg = &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 更新数据</span></span><br><span class="line">  s2.<span class="title function_">setDataCfg</span>(s2DataCfg)</span><br><span class="line">  <span class="comment">// 渲染视图，传入 true 表示数据发生了更新</span></span><br><span class="line">  s2.<span class="title function_">render</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 监听数据变化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> props.<span class="property">data</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">renderChart</span>()</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>此时，表格与大区联动完成。</p>
</li>
<li><p>最后处理下国际化内容：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 监听语言变化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">watchSwitchLang</span>(renderChart)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>至此，基于 <code>S2</code> 的大区营销数据分析图表渲染完成。</p>
<h2 id="25：总结"><a href="#25：总结" class="headerlink" title="25：总结"></a>25：总结</h2><p>那么到这里咱们的整个的 <strong>数据可视化</strong> 加餐模块就已经全部讲解完成了。</p>
<p>新增的加餐内容，并没有提供 <strong>大屏可视化</strong> 的对应内容，因为就像我们之前所说的 <strong>大屏可视化</strong> 主要以单独的项目进行展示，并不适合集成到后台解决方案之中。另外，也是最重要的一点：<strong>大屏可视化与数据可视化在解决方案中，并没有本质的区别。</strong></p>
<p>好，那么祝大家学习愉快，我是 <code>Sunday</code>，咱们下次再见！</p>
]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>升级为最新版本的更新</title>
    <url>/2024/10/07/%E5%8D%87%E7%BA%A7%E4%B8%BA%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84%E6%9B%B4%E6%96%B0/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第三章：项目架构之搭建登录架构解决方案与实现</title>
    <url>/2024/10/07/%E6%9E%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第七章：权限架构处理之用户权限处理</title>
    <url>/2024/10/07/%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9A%E6%9D%83%E9%99%90%E6%9E%B6%E6%9E%84%E5%A4%84%E7%90%86%E4%B9%8B%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第九章：动态表格渲染方案之文章排名业务实现</title>
    <url>/2024/10/07/%E7%AC%AC%E4%B9%9D%E7%AB%A0%EF%BC%9A%E5%8A%A8%E6%80%81%E8%A1%A8%E6%A0%BC%E6%B8%B2%E6%9F%93%E6%96%B9%E6%A1%88%E4%B9%8B%E6%96%87%E7%AB%A0%E6%8E%92%E5%90%8D%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第八章：权限控制解决方案之分级分控权限管理</title>
    <url>/2024/10/07/%E7%AC%AC%E5%85%AB%E7%AB%A0%EF%BC%9A%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E5%88%86%E7%BA%A7%E5%88%86%E6%8E%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第六章：vue3+ElementPlus综合实现解决方案</title>
    <url>/2024/10/07/%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9Avue3-ElementPlus%E7%BB%BC%E5%90%88%E5%AE%9E%E7%8E%B0%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第十一章：项目部署之通用方案</title>
    <url>/2024/10/07/%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9A%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B9%8B%E9%80%9A%E7%94%A8%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第十章：富文本与markdown综合处理之创建文章</title>
    <url>/2024/10/07/%E7%AC%AC%E5%8D%81%E7%AB%A0%EF%BC%9A%E5%AF%8C%E6%96%87%E6%9C%AC%E4%B8%8Emarkdown%E7%BB%BC%E5%90%88%E5%A4%84%E7%90%86%E4%B9%8B%E5%88%9B%E5%BB%BA%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第二章：标准化大厂编程规范解决方案之eslint+Hooks</title>
    <url>/2024/10/07/Hooks/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第四章：项目架构之搭建layout架构解决方案与实现</title>
    <url>/2024/10/07/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>第五章：后台项目前端综合解决方案之通用功能开发</title>
    <url>/2024/10/07/%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE%E5%89%8D%E7%AB%AF%E7%BB%BC%E5%90%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E4%B9%8B%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>后台管理系统</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
</search>
